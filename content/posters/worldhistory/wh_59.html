<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–í–µ—á–Ω—ã–π –≥–æ—Ä–æ–¥: –ñ–∏–∑–Ω—å –≤ —Å–µ—Ä–¥—Ü–µ –º–∏—Ä–∞</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600&family=Montserrat:wght@700;800&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background: radial-gradient(circle at top left, #451a03, #1c1917, #0c0a09);
            color: #fff7ed;
            min-height: 100vh;
        }
        h1, h2, h3 { font-family: 'Montserrat', sans-serif; }
        .glass {
            background: rgba(255, 255, 255, 0.02);
            backdrop-filter: blur(25px);
            border: 1px solid rgba(217, 119, 6, 0.15);
            border-radius: 3rem;
        }
        .btn-lang {
            transition: all 0.3s ease;
            padding: 0.6rem 1.8rem;
            border-radius: 1.5rem;
            font-weight: 700;
        }
        .btn-lang.active {
            background: #d97706;
            color: white;
            box-shadow: 0 0 30px rgba(217, 119, 6, 0.4);
        }
        .info-panel-accent {
            border-left: 6px solid #d97706;
            background: linear-gradient(90deg, rgba(217, 119, 6, 0.05), transparent);
        }
        .custom-scrollbar::-webkit-scrollbar { width: 5px; }
        .custom-scrollbar::-webkit-scrollbar-thumb { background: #d97706; border-radius: 10px; }
    </style>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
</head>
<body class="p-4 md:p-10">

<!-- –ö–ù–û–ü–ö–ê –ù–ê–ó–ê–î -->
<div style="position: fixed; top: 20px; left: 20px; z-index: 10000;">
    <button onclick="goBack()" style="
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        border: none;
        color: white;
        padding: 12px 24px;
        border-radius: 10px;
        font-size: 16px;
        font-weight: 600;
        cursor: pointer;
        box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);
        transition: all 0.3s ease;
        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;
    " onmouseover="this.style.transform='translateX(-5px)'; this.style.boxShadow='0 6px 20px rgba(102, 126, 234, 0.6)';" 
       onmouseout="this.style.transform='translateX(0)'; this.style.boxShadow='0 4px 15px rgba(102, 126, 234, 0.4)';">
        ‚Üê –ù–∞–∑–∞–¥
    </button>
</div>


    <!-- Header -->
    <header class="max-w-7xl mx-auto flex flex-col lg:flex-row justify-between items-center mb-12 gap-8 text-center lg:text-left">
        <div class="space-y-2">
            <h1 id="main-title" class="text-4xl md:text-6xl font-black tracking-tighter text-transparent bg-clip-text bg-gradient-to-r from-orange-400 via-stone-200 to-amber-600 uppercase">
                –í–µ—á–Ω—ã–π –≥–æ—Ä–æ–¥
            </h1>
            <p id="sub-title" class="text-amber-200/40 text-lg md:text-xl font-medium tracking-[0.3em] uppercase">–ë—ã—Ç –∏ –Ω—Ä–∞–≤—ã –º–∏–ª–ª–∏–æ–Ω–Ω–æ–≥–æ –†–∏–º–∞</p>
        </div>
        <div class="flex gap-3 glass p-2 border-orange-500/20">
            <button onclick="setLang('ru')" id="lang-ru" class="btn-lang active">RU</button>
            <button onclick="setLang('kz')" id="lang-kz" class="btn-lang">KZ</button>
            <button onclick="setLang('en')" id="lang-en" class="btn-lang">EN</button>
        </div>
    </header>

    <main class="max-w-7xl mx-auto grid grid-cols-1 lg:grid-cols-12 gap-10 mb-16">
        <!-- Canvas Visual Model -->
        <div class="lg:col-span-7 glass p-8 md:p-10 flex flex-col border-stone-800 shadow-2xl">
            <h2 id="visual-title" class="text-2xl mb-6 text-amber-500 uppercase font-bold tracking-widest flex items-center gap-3">
                <span class="w-10 h-1 bg-amber-600 inline-block"></span>
                –ö–∞—Ä—Ç–∞ —Ä–∞–∑–≤–ª–µ—á–µ–Ω–∏–π –∏ –±—ã—Ç–∞
            </h2>
            <div class="relative flex-grow bg-black/40 rounded-[2.5rem] border border-stone-800 overflow-hidden shadow-inner flex items-center justify-center">
                <canvas id="cityMapCanvas"></canvas>
            </div>
            <p id="hint" class="mt-6 text-sm text-stone-500 italic text-center uppercase tracking-widest">–ù–∞–∂–º–∏—Ç–µ –Ω–∞ –∑–Ω–∞–∫–æ–≤—ã–µ –º–µ—Å—Ç–∞ –†–∏–º–∞ –¥–ª—è –ø–æ–≥—Ä—É–∂–µ–Ω–∏—è –≤ –±—ã—Ç</p>
        </div>

        <!-- Dynamic Info Panel -->
        <div class="lg:col-span-5 glass p-8 md:p-10 flex flex-col info-panel-accent">
            <div id="info-content" class="custom-scrollbar overflow-y-auto h-full pr-4">
                <div id="info-placeholder" class="h-full flex flex-col justify-center">
                    <h3 class="text-3xl md:text-4xl text-amber-600 mb-8 font-black uppercase leading-tight" id="placeholder-title">–•–ª–µ–±–∞ –∏ –∑—Ä–µ–ª–∏—â!</h3>
                    <p class="text-stone-300 leading-relaxed text-lg" id="placeholder-text">
                        –†–∏–º –±—ã–ª —Ü–µ–Ω—Ç—Ä–æ–º –º–∏—Ä–∞, –≥–¥–µ —Ä–æ—Å–∫–æ—à–Ω—ã–µ –¥–≤–æ—Ä—Ü—ã —Å–æ—Å–µ–¥—Å—Ç–≤–æ–≤–∞–ª–∏ —Å —Ç–µ—Å–Ω—ã–º–∏ –º–Ω–æ–≥–æ—ç—Ç–∞–∂–∫–∞–º–∏. –£–∑–Ω–∞–π—Ç–µ, –∫–∞–∫ –æ—Ç–¥—ã—Ö–∞–ª–∏, –≤–æ —á—Ç–æ –≤–µ—Ä–∏–ª–∏ –∏ –≥–¥–µ –∂–∏–ª–∏ –æ–±—ã—á–Ω—ã–µ —Ä–∏–º–ª—è–Ω–µ. –ù–∞–∂–º–∏—Ç–µ –Ω–∞ —Ç–æ—á–∫–∏ —Å—Ö–µ–º—ã.
                    </p>
                    <div class="mt-10 space-y-6">
                        <div class="flex items-center gap-5 p-5 bg-white/5 rounded-3xl border border-white/5">
                            <span class="text-3xl">üèüÔ∏è</span>
                            <span id="hint-1" class="text-amber-200/60 font-bold uppercase text-xs tracking-widest">–í–µ–ª–∏–∫–∏–µ –∏–≥—Ä—ã</span>
                        </div>
                        <div class="flex items-center gap-5 p-5 bg-white/5 rounded-3xl border border-white/5">
                            <span class="text-3xl">üõÅ</span>
                            <span id="hint-2" class="text-amber-200/60 font-bold uppercase text-xs tracking-widest">–ö—É–ª—å—Ç—É—Ä–∞ —Ç–µ—Ä–º</span>
                        </div>
                    </div>
                </div>

                <div id="info-data" class="hidden animate-in fade-in duration-500">
                    <span id="info-tag" class="inline-block bg-amber-950/40 text-amber-400 px-4 py-1.5 rounded-full text-[10px] font-black uppercase tracking-widest mb-6 border border-amber-800"></span>
                    <h3 id="info-title" class="text-3xl md:text-4xl text-white font-black mb-8 uppercase leading-none"></h3>
                    <div id="info-desc" class="text-stone-300 leading-relaxed text-lg mb-10 space-y-4"></div>
                    <div class="p-8 bg-stone-950/40 rounded-[2.5rem] border border-stone-800 shadow-xl">
                        <strong class="text-amber-500 block mb-3 text-xs uppercase tracking-[0.2em]" id="label-life">–î–µ—Ç–∞–ª—å —Ä–∏–º—Å–∫–æ–π –∂–∏–∑–Ω–∏:</strong>
                        <p id="info-fact" class="text-stone-100 text-base italic leading-relaxed"></p>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Detailed Fact Cards -->
    <section class="max-w-7xl mx-auto grid grid-cols-1 md:grid-cols-3 gap-8 mb-16">
        <div class="glass p-10 border-b-8 border-amber-900 hover:bg-white/5 transition-all">
            <div class="text-4xl mb-6">üè¢</div>
            <h3 id="card1-title" class="text-xl font-black mb-4 text-amber-500 uppercase">–ò–Ω—Å—É–ª—ã ‚Äî –Ω–µ–±–æ—Å–∫—Ä–µ–±—ã</h3>
            <p id="card1-text" class="text-stone-400 text-sm leading-relaxed">–ë–µ–¥–Ω–æ—Ç–∞ –∂–∏–ª–∞ –≤ <strong>–∏–Ω—Å—É–ª–∞—Ö</strong> ‚Äî –º–Ω–æ–≥–æ—ç—Ç–∞–∂–Ω—ã—Ö –¥–æ–º–∞—Ö. –û–Ω–∏ —á–∞—Å—Ç–æ —Ä—É—à–∏–ª–∏—Å—å –∏ –≥–æ—Ä–µ–ª–∏. –í –Ω–∏—Ö –Ω–µ –±—ã–ª–æ –≤–æ–¥–æ–ø—Ä–æ–≤–æ–¥–∞, –∞ –∂–∏—Ç–µ–ª–∏ –≤–µ—Ä—Ö–Ω–∏—Ö —ç—Ç–∞–∂–µ–π –≤—ã–±—Ä–∞—Å—ã–≤–∞–ª–∏ –º—É—Å–æ—Ä –ø—Ä—è–º–æ –Ω–∞ —É–ª–∏—Ü—É.</p>
        </div>
        <div class="glass p-10 border-b-8 border-stone-700 hover:bg-white/5 transition-all">
            <div class="text-4xl mb-6">üè∫</div>
            <h3 id="card2-title" class="text-xl font-black mb-4 text-stone-200 uppercase">–î–æ–º—É—Å –±–æ–≥–∞—á–∞</h3>
            <p id="card2-text" class="text-slate-400 text-sm leading-relaxed">–ó–Ω–∞—Ç–Ω—ã–µ —Ä–∏–º–ª—è–Ω–µ –≤–ª–∞–¥–µ–ª–∏ <strong>–¥–æ–º—É—Å–∞–º–∏</strong> —Å –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–º–∏ –¥–≤–æ—Ä–∏–∫–∞–º–∏ (–∞—Ç—Ä–∏—É–º–∞–º–∏) –∏ —Å–∞–¥–∞–º–∏. –°—Ç–µ–Ω—ã —É–∫—Ä–∞—à–∞–ª–∏—Å—å –º–æ–∑–∞–∏–∫–æ–π –∏ —Ñ—Ä–µ—Å–∫–∞–º–∏, –∞ –≤ —Ü–µ–Ω—Ç—Ä–µ –Ω–∞—Ö–æ–¥–∏–ª—Å—è –±–∞—Å—Å–µ–π–Ω –¥–ª—è —Å–±–æ—Ä–∞ –¥–æ–∂–¥–µ–≤–æ–π –≤–æ–¥—ã.</p>
        </div>
        <div class="glass p-10 border-b-8 border-orange-900 hover:bg-white/5 transition-all">
            <div class="text-4xl mb-6">üçû</div>
            <h3 id="card3-title" class="text-xl font-black mb-4 text-orange-500 uppercase">–•–ª–µ–±–∞ –∏ –∑—Ä–µ–ª–∏—â</h3>
            <p id="card3-text" class="text-slate-400 text-sm leading-relaxed">–ö—Ä—ã–ª–∞—Ç–∞—è —Ñ—Ä–∞–∑–∞ –Æ–≤–µ–Ω–∞–ª–∞. –í–ª–∞—Å—Ç–∏ –±–µ—Å–ø–ª–∞—Ç–Ω–æ —Ä–∞–∑–¥–∞–≤–∞–ª–∏ —Ö–ª–µ–± —Å–æ—Ç–Ω—è–º —Ç—ã—Å—è—á –±–µ–¥–Ω—è–∫–æ–≤ –∏ —É—Å—Ç—Ä–∞–∏–≤–∞–ª–∏ –∫—Ä–æ–≤–∞–≤—ã–µ –±–æ–∏ –Ω–∞ –∞—Ä–µ–Ω–∞—Ö, —á—Ç–æ–±—ã –æ—Ç–≤–ª–µ—á—å –Ω–∞—Ä–æ–¥ –æ—Ç –ø–æ–ª–∏—Ç–∏–∫–∏.</p>
        </div>
    </section>

    <!-- Footer -->
    <footer class="max-w-7xl mx-auto text-center p-20 glass border-stone-800 mb-10">
        <p id="footer-quote" class="text-3xl md:text-4xl font-light italic text-stone-300 leading-tight max-w-5xl mx-auto">
            ¬´–í—Å–µ –¥–æ—Ä–æ–≥–∏ –≤–µ–¥—É—Ç –≤ –†–∏–º, –Ω–æ –≤ —Å–∞–º–æ–º –†–∏–º–µ –æ–Ω–∏ –≤–µ–¥—É—Ç –ª–∏–±–æ –∫ —Ä–æ—Å–∫–æ—à–∏ –§–æ—Ä—É–º–∞, –ª–∏–±–æ –∫ –∫–æ–ø–æ—Ç–∏ –∏–Ω—Å—É–ª¬ª.
        </p>
    </footer>

    <script>
        const translations = {
            ru: {
                title: "–í–µ—á–Ω—ã–π –≥–æ—Ä–æ–¥",
                subtitle: "–ë—ã—Ç –∏ –Ω—Ä–∞–≤—ã –º–∏–ª–ª–∏–æ–Ω–Ω–æ–≥–æ –†–∏–º–∞",
                visualTitle: "–ö–∞—Ä—Ç–∞ —Ä–∞–∑–≤–ª–µ—á–µ–Ω–∏–π –∏ –±—ã—Ç–∞",
                hint: "–ù–∞–∂–º–∏—Ç–µ –Ω–∞ –∑–Ω–∞–∫–æ–≤—ã–µ –º–µ—Å—Ç–∞ –†–∏–º–∞ –¥–ª—è –ø–æ–≥—Ä—É–∂–µ–Ω–∏—è",
                placeholderTitle: "–•–ª–µ–±–∞ –∏ –∑—Ä–µ–ª–∏—â!",
                placeholderText: "–†–∏–º ‚Äî –º–µ–≥–∞–ø–æ–ª–∏—Å –¥—Ä–µ–≤–Ω–æ—Å—Ç–∏. –ï–≥–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –ø–æ—Ä–∞–∂–∞–µ—Ç –∏–Ω–∂–µ–Ω–µ—Ä–∏–µ–π, –∞ –∂–∏–∑–Ω—å ‚Äî –∫–æ–Ω—Ç—Ä–∞—Å—Ç–∞–º–∏. –í—ã–±–µ—Ä–∏—Ç–µ –æ–±—ä–µ–∫—Ç –Ω–∞ —Å—Ö–µ–º–µ.",
                labelLife: "–î–µ—Ç–∞–ª—å —Ä–∏–º—Å–∫–æ–π –∂–∏–∑–Ω–∏:",
                hint1: "–í–µ–ª–∏–∫–∏–µ –∏–≥—Ä—ã", hint2: "–ö—É–ª—å—Ç—É—Ä–∞ —Ç–µ—Ä–º",
                card1Title: "–ò–Ω—Å—É–ª—ã ‚Äî –Ω–µ–±–æ—Å–∫—Ä–µ–±—ã",
                card1Text: "–í—ã—Å–æ—Ç–Ω—ã–µ –¥–æ–º–∞ –¥–ª—è –ø–ª–µ–±–µ–µ–≤. –ù–∞ –Ω–∏–∂–Ω–∏—Ö —ç—Ç–∞–∂–∞—Ö –∫–∏–ø–µ–ª–∞ —Ç–æ—Ä–≥–æ–≤–ª—è, –Ω–∞ –≤–µ—Ä—Ö–Ω–∏—Ö ‚Äî —é—Ç–∏–ª–∞—Å—å –Ω–∏—â–µ—Ç–∞.",
                card2Title: "–î–æ–º—É—Å –±–æ–≥–∞—á–∞",
                card2Text: "–ß–∞—Å—Ç–Ω—ã–π –¥–æ–º —Å –∞—Ç—Ä–∏—É–º–æ–º –∏ –ø–µ—Ä–∏—Å—Ç–∏–ª–µ–º. –°–∏–º–≤–æ–ª –≤—ã—Å–æ–∫–æ–≥–æ —Å—Ç–∞—Ç—É—Å–∞, –ø–æ–∫–æ—è –∏ —Ä–æ—Å–∫–æ—à–∏.",
                card3Title: "–•–ª–µ–±–∞ –∏ –∑—Ä–µ–ª–∏—â",
                card3Text: "–°–∏—Å—Ç–µ–º–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ç–æ–ª–ø–æ–π —á–µ—Ä–µ–∑ –±–µ—Å–ø–ª–∞—Ç–Ω—É—é –µ–¥—É –∏ –∂–µ—Å—Ç–æ–∫–∏–µ —à–æ—É –Ω–∞ –∞—Ä–µ–Ω–∞—Ö –ö–æ–ª–∏–∑–µ—è.",
                footerQuote: "¬´–í—Å–µ –¥–æ—Ä–æ–≥–∏ –≤–µ–¥—É—Ç –≤ –†–∏–º, –Ω–æ –≤ —Å–∞–º–æ–º –†–∏–º–µ –æ–Ω–∏ –≤–µ–¥—É—Ç –ª–∏–±–æ –∫ —Ä–æ—Å–∫–æ—à–∏ –§–æ—Ä—É–º–∞, –ª–∏–±–æ –∫ –∫–æ–ø–æ—Ç–∏ –∏–Ω—Å—É–ª¬ª.",
                nodes: [
                    { id: 1, tag: "–¶–µ–Ω—Ç—Ä", title: "–†–∏–º—Å–∫–∏–π –§–æ—Ä—É–º", desc: "–°–µ—Ä–¥—Ü–µ –æ–±—â–µ—Å—Ç–≤–µ–Ω–Ω–æ–π –∂–∏–∑–Ω–∏. –ó–¥–µ—Å—å –Ω–∞—Ö–æ–¥–∏–ª–∏—Å—å —Ö—Ä–∞–º—ã, —Å—É–¥—ã –∏ —Ç—Ä–∏–±—É–Ω—ã –¥–ª—è –æ—Ä–∞—Ç–æ—Ä–æ–≤. –ö–∞–∂–¥—ã–π –∏–º–ø–µ—Ä–∞—Ç–æ—Ä —Å—Ç—Ä–µ–º–∏–ª—Å—è –ø–æ—Å—Ç—Ä–æ–∏—Ç—å –∑–¥–µ—Å—å —Å–≤–æ–π —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π —Ñ–æ—Ä—É–º.", fact: "–ó–æ–ª–æ—Ç–æ–π –º–∏–ª—å–Ω—ã–π —Å—Ç–æ–ª–± –Ω–∞ —Ñ–æ—Ä—É–º–µ —Å—á–∏—Ç–∞–ª—Å—è —Ç–æ—á–∫–æ–π –æ—Ç—Å—á–µ—Ç–∞ –≤—Å–µ—Ö –¥–æ—Ä–æ–≥ –∏–º–ø–µ—Ä–∏–∏." },
                    { id: 2, tag: "–ê—Ä–µ–Ω–∞", title: "–ö–æ–ª–∏–∑–µ–π (–§–ª–∞–≤–∏–µ–≤)", desc: "–ì—Ä–∞–Ω–¥–∏–æ–∑–Ω—ã–π –∞–º—Ñ–∏—Ç–µ–∞—Ç—Ä –¥–ª—è –≥–ª–∞–¥–∏–∞—Ç–æ—Ä—Å–∫–∏—Ö –±–æ–µ–≤ –∏ —Ç—Ä–∞–≤–ª–∏ –∑–≤–µ—Ä–µ–π. –í–º–µ—â–∞–ª –¥–æ 50 —Ç—ã—Å—è—á –∑—Ä–∏—Ç–µ–ª–µ–π, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–≥–ª–∏ –ø–æ–∫–∏–Ω—É—Ç—å –∑–¥–∞–Ω–∏–µ –∑–∞ —Å—á–∏—Ç–∞–Ω–Ω—ã–µ –º–∏–Ω—É—Ç—ã –±–ª–∞–≥–æ–¥–∞—Ä—è —Å–∏—Å—Ç–µ–º–µ –≤—ã—Ö–æ–¥–æ–≤.", fact: "–ê—Ä–µ–Ω—É –ö–æ–ª–∏–∑–µ—è –º–æ–∂–Ω–æ –±—ã–ª–æ –∑–∞—Ç–æ–ø–∏—Ç—å –≤–æ–¥–æ–π –¥–ª—è –ø—Ä–æ–≤–µ–¥–µ–Ω–∏—è –º–æ—Ä—Å–∫–∏—Ö —Å—Ä–∞–∂–µ–Ω–∏–π ‚Äî –Ω–∞–≤–º–∞—Ö–∏–π." },
                    { id: 3, tag: "–î–æ—Å—É–≥", title: "–¢–µ—Ä–º—ã –ö–∞—Ä–∞–∫–∞–ª–ª—ã", desc: "–û–±—â–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –±–∞–Ω–∏, –ø—Ä–µ–≤—Ä–∞—Ç–∏–≤—à–∏–µ—Å—è –≤ –∫—É–ª—å—Ç—É—Ä–Ω—ã–µ —Ü–µ–Ω—Ç—Ä—ã. –í —Ç–µ—Ä–º–∞—Ö –±—ã–ª–∏ –±–∞—Å—Å–µ–π–Ω—ã, —Å–ø–æ—Ä—Ç–∑–∞–ª—ã, –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ –∏ –∑–∞–ª—ã –¥–ª—è –¥–∏—Å–∫—É—Å—Å–∏–π.", fact: "–í—Ö–æ–¥ –≤ —Ç–µ—Ä–º—ã —Å—Ç–æ–∏–ª –∫–æ–ø–µ–π–∫–∏, –ø–æ—ç—Ç–æ–º—É –∏—Ö –ø–æ—Å–µ—â–∞–ª–∏ –ø–æ—á—Ç–∏ –≤—Å–µ —Å–≤–æ–±–æ–¥–Ω—ã–µ –≥—Ä–∞–∂–¥–∞–Ω–µ –µ–∂–µ–¥–Ω–µ–≤–Ω–æ." },
                    { id: 4, tag: "–°–∫–æ—Ä–æ—Å—Ç—å", title: "–ë–æ–ª—å—à–æ–π –¶–∏—Ä–∫", desc: "–û–≥—Ä–æ–º–Ω—ã–π –∏–ø–ø–æ–¥—Ä–æ–º –¥–ª—è –≥–æ–Ω–æ–∫ –Ω–∞ –∫–æ–ª–µ—Å–Ω–∏—Ü–∞—Ö. –í–º–µ—â–∞–ª –±–æ–ª–µ–µ 150 —Ç—ã—Å—è—á —á–µ–ª–æ–≤–µ–∫. –ë–æ–ª–µ–ª—å—â–∏–∫–∏ –¥–µ–ª–∏–ª–∏—Å—å –Ω–∞ –ø–∞—Ä—Ç–∏–∏ '–∑–µ–ª–µ–Ω—ã—Ö', '—Å–∏–Ω–∏—Ö', '–∫—Ä–∞—Å–Ω—ã—Ö' –∏ '–±–µ–ª—ã—Ö'.", fact: "–ì–æ–Ω—â–∏–∫–∏ –Ω–∞ –∫–æ–ª–µ—Å–Ω–∏—Ü–∞—Ö –±—ã–ª–∏ —Å–∞–º—ã–º–∏ –±–æ–≥–∞—Ç—ã–º–∏ —Å–ø–æ—Ä—Ç—Å–º–µ–Ω–∞–º–∏ –¥—Ä–µ–≤–Ω–æ—Å—Ç–∏." },
                    { id: 5, tag: "–ì–∏–≥–∏–µ–Ω–∞", title: "–ê–∫–≤–µ–¥—É–∫–∏", desc: "–ú–Ω–æ–≥–æ–∫–∏–ª–æ–º–µ—Ç—Ä–æ–≤—ã–µ –∫–∞–º–µ–Ω–Ω—ã–µ –º–æ—Å—Ç—ã, –ø–æ –∫–æ—Ç–æ—Ä—ã–º –≤ –≥–æ—Ä–æ–¥ —Ç–µ–∫–ª–∞ —á–∏—Å—Ç–∞—è –≥–æ—Ä–Ω–∞—è –≤–æ–¥–∞. –†–∏–º –ø–æ—Ç—Ä–µ–±–ª—è–ª –≤–æ–¥—ã –±–æ–ª—å—à–µ, —á–µ–º –º–Ω–æ–≥–∏–µ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ –≥–æ—Ä–æ–¥–∞.", fact: "–ö –∫–æ–Ω—Ü—É II –≤–µ–∫–∞ –≤ –†–∏–º–µ –±—ã–ª–æ 11 –∫—Ä—É–ø–Ω—ã—Ö –∞–∫–≤–µ–¥—É–∫–æ–≤, —Å–Ω–∞–±–∂–∞–≤—à–∏—Ö —Ñ–æ–Ω—Ç–∞–Ω—ã, —Ç–µ—Ä–º—ã –∏ –±–æ–≥–∞—Ç—ã–µ –¥–æ–º–∞." }
                ]
            },
            kz: {
                title: "–ú”ô“£–≥—ñ–ª—ñ–∫ “õ–∞–ª–∞",
                subtitle: "–ú–∏–ª–ª–∏–æ–Ω–¥—ã –†–∏–º–Ω—ñ“£ —Ç“±—Ä–º—ã—Å—ã –º–µ–Ω ”ô–¥–µ—Ç-“ì“±—Ä–ø—ã",
                visualTitle: "–û–π—ã–Ω-—Å–∞—É—ã“õ –ø–µ–Ω —Ç“±—Ä–º—ã—Å –∫–∞—Ä—Ç–∞—Å—ã",
                hint: "–¢“±—Ä–º—ã—Å“õ–∞ –±–æ–π–ª–∞—É “Ø—à—ñ–Ω –†–∏–º–Ω—ñ“£ –º–∞“£—ã–∑–¥—ã –∂–µ—Ä–ª–µ—Ä—ñ–Ω –±–∞—Å—ã“£—ã–∑",
                placeholderTitle: "–ù–∞–Ω –º–µ–Ω –æ–π—ã–Ω-—Å–∞—É—ã“õ!",
                placeholderText: "–†–∏–º ‚Äî –µ–∂–µ–ª–≥—ñ –∑–∞–º–∞–Ω–Ω—ã“£ –º–µ–≥–∞–ø–æ–ª–∏—Å—ñ. –û–Ω—ã“£ “õ“±—Ä—ã–ª—ã—Å—ã –∏–Ω–∂–µ–Ω–µ—Ä–ª—ñ–∫ —à–µ–±–µ—Ä–ª—ñ–∫–ø–µ–Ω, –∞–ª ”©–º—ñ—Ä—ñ “õ–∞—Ä–∞–º–∞-“õ–∞–π—à—ã–ª—ã“õ—Ç–∞—Ä–º–µ–Ω —Ç–∞“£“ì–∞–ª–¥—ã—Ä–∞–¥—ã.",
                labelLife: "–†–∏–º ”©–º—ñ—Ä—ñ–Ω—ñ“£ –º”ô–ª—ñ–º–µ—Ç—ñ:",
                hint1: "“∞–ª—ã –æ–π—ã–Ω–¥–∞—Ä", hint2: "–¢–µ—Ä–º–∞ –º”ô–¥–µ–Ω–∏–µ—Ç—ñ",
                card1Title: "–ò–Ω—Å—É–ª–∞–ª–∞—Ä ‚Äî –∑”ô—É–ª—ñ–º “Ø–π–ª–µ—Ä",
                card1Text: "–ü–ª–µ–±–µ–π–ª–µ—Ä–≥–µ –∞—Ä–Ω–∞–ª“ì–∞–Ω –∫”©–ø“õ–∞–±–∞—Ç—Ç—ã “Ø–π–ª–µ—Ä. –¢”©–º–µ–Ω–≥—ñ “õ–∞–±–∞—Ç—Ç–∞ —Å–∞—É–¥–∞ –∂“Ø—Ä—Å–µ, –∂–æ“ì–∞—Ä“ì—ã –∂–∞“ì—ã–Ω–¥–∞ –∫–µ–¥–µ–π–ª–µ—Ä —Ç“±—Ä–¥—ã.",
                card2Title: "–ê“õ—Å“Ø–π–µ–∫ –¥–æ–º—É—Å—ã",
                card2Text: "–ê—Ç—Ä–∏—É–º—ã –º–µ–Ω –±–∞“ì—ã –±–∞—Ä –∂–µ–∫–µ “Ø–π. –ú”ô—Ä—Ç–µ–±–µ –º–µ–Ω —Å”ô–Ω-—Å–∞–ª—Ç–∞–Ω–∞—Ç—Ç—ã“£ –Ω—ã—à–∞–Ω—ã.",
                card3Title: "–ù–∞–Ω –º–µ–Ω –æ–π—ã–Ω-—Å–∞—É—ã“õ",
                card3Text: "–¢–µ–≥—ñ–Ω —Ç–∞–º–∞“õ –ø–µ–Ω –ö–æ–ª–∏–∑–µ–π–¥–µ–≥—ñ “õ–∞—Ç–∞–ª —à–æ—É–ª–∞—Ä –∞—Ä“õ—ã–ª—ã —Ö–∞–ª—ã“õ—Ç—ã –±–∞—Å“õ–∞—Ä—É –∂“Ø–π–µ—Å—ñ.",
                footerQuote: "¬´–ë–∞—Ä–ª—ã“õ –∂–æ–ª–¥–∞—Ä –†–∏–º–≥–µ –∞–ø–∞—Ä–∞–¥—ã, –±—ñ—Ä–∞“õ –†–∏–º–Ω—ñ“£ —ñ—à—ñ–Ω–¥–µ –æ–ª–∞—Ä –Ω–µ –§–æ—Ä—É–º“ì–∞, –Ω–µ –∏–Ω—Å—É–ª–∞–ª–∞—Ä–¥—ã“£ –∫“Ø–π–µ—Å—ñ–Ω–µ –∞–ø–∞—Ä–∞–¥—ã¬ª.",
                nodes: [
                    { id: 1, tag: "–û—Ä—Ç–∞–ª—ã“õ", title: "–†–∏–º –§–æ—Ä—É–º—ã", desc: "“ö–æ“ì–∞–º–¥—ã“õ ”©–º—ñ—Ä–¥—ñ“£ –∂“Ø—Ä–µ–≥—ñ. –ú“±–Ω–¥–∞ —Ö—Ä–∞–º–¥–∞—Ä, —Å–æ—Ç—Ç–∞—Ä –∂”ô–Ω–µ —à–µ—à–µ–Ω–¥–µ—Ä –º—ñ–Ω–±–µ—Ä—ñ –æ—Ä–Ω–∞–ª–∞—Å“õ–∞–Ω.", fact: "–§–æ—Ä—É–º–¥–∞“ì—ã –∞–ª—Ç—ã–Ω –±–∞“ì–∞–Ω–∞ –∏–º–ø–µ—Ä–∏—è–Ω—ã“£ –±–∞—Ä–ª—ã“õ –∂–æ–ª–¥–∞—Ä—ã–Ω—ã“£ –±–∞—Å—Ç–∞—É –Ω“Ø–∫—Ç–µ—Å—ñ —Å–∞–Ω–∞–ª–¥—ã." },
                    { id: 2, tag: "–ê—Ä–µ–Ω–∞", title: "–ö–æ–ª–∏–∑–µ–π", desc: "–ì–ª–∞–¥–∏–∞—Ç–æ—Ä–ª—ã“õ —à–∞–π“õ–∞—Å—Ç–∞—Ä –º–µ–Ω –∞“£ –∞—É–ª–∞—É“ì–∞ –∞—Ä–Ω–∞–ª“ì–∞–Ω –∞–ª—ã–ø –∞–º—Ñ–∏—Ç–µ–∞—Ç—Ä. 50 –º—ã“£ –∫”©—Ä–µ—Ä–º–µ–Ω —Å—ã–π–¥—ã—Ä“ì–∞–Ω.", fact: "–ö–æ–ª–∏–∑–µ–π –∞—Ä–µ–Ω–∞—Å—ã–Ω —Ç–µ“£—ñ–∑ —à–∞–π“õ–∞—Å—Ç–∞—Ä—ã–Ω –∫”©—Ä—Å–µ—Ç—É “Ø—à—ñ–Ω —Å—É“ì–∞ —Ç–æ–ª—Ç—ã—Ä—É“ì–∞ –±–æ–ª–∞—Ç—ã–Ω –µ–¥—ñ." },
                    { id: 3, tag: "–î–µ–º–∞–ª—ã—Å", title: "–ö–∞—Ä–∞–∫–∞–ª–ª–∞ —Ç–µ—Ä–º–∞–ª–∞—Ä—ã", desc: "–ú”ô–¥–µ–Ω–∏ –æ—Ä—Ç–∞–ª—ã“õ“õ–∞ –∞–π–Ω–∞–ª“ì–∞–Ω “õ–æ“ì–∞–º–¥—ã“õ –º–æ–Ω—à–∞–ª–∞—Ä. –ú“±–Ω–¥–∞ –±–∞—Å—Å–µ–π–Ω–¥–µ—Ä, —Å–ø–æ—Ä—Ç –∑–∞–ª–¥–∞—Ä—ã –º–µ–Ω –∫—ñ—Ç–∞–ø—Ö–∞–Ω–∞–ª–∞—Ä –±–æ–ª–¥—ã.", fact: "–¢–µ—Ä–º–∞–ª–∞—Ä“ì–∞ –∫—ñ—Ä—É ”©—Ç–µ –∞—Ä–∑–∞–Ω –±–æ–ª“ì–∞–Ω–¥—ã“õ—Ç–∞–Ω, –æ“ì–∞–Ω –±–∞—Ä–ª—ã“õ –∞–∑–∞–º–∞—Ç—Ç–∞—Ä –∫“Ø–Ω–¥–µ –±–∞—Ä“ì–∞–Ω." },
                    { id: 4, tag: "–ñ—ã–ª–¥–∞–º–¥—ã“õ", title: "“Æ–ª–∫–µ–Ω –¶–∏—Ä–∫", desc: "–ö“Ø–π–º–µ –∂–∞—Ä—ã—Å—Ç–∞—Ä—ã–Ω–∞ –∞—Ä–Ω–∞–ª“ì–∞–Ω –∞–ª—ã–ø –∏–ø–ø–æ–¥—Ä–æ–º. 150 –º—ã“£–Ω–∞–Ω –∞—Å—Ç–∞–º –∞–¥–∞–º —Å—ã–π–¥—ã—Ä“ì–∞–Ω.", fact: "–ö“Ø–π–º–µ –∞–π–¥–∞—É—à—ã–ª–∞—Ä –µ–∂–µ–ª–≥—ñ –∑–∞–º–∞–Ω–Ω—ã“£ –µ“£ –±–∞–π —Å–ø–æ—Ä—Ç—à—ã–ª–∞—Ä—ã –±–æ–ª–¥—ã." },
                    { id: 5, tag: "–ì–∏–≥–∏–µ–Ω–∞", title: "–ê–∫–≤–µ–¥—É–∫—Ç–∞—Ä", desc: "“ö–∞–ª–∞“ì–∞ —Ç–∞—É–¥—ã“£ —Ç–∞–∑–∞ —Å—É—ã–Ω –∂–µ—Ç–∫—ñ–∑–µ—Ç—ñ–Ω —Ç–∞—Å –∫”©–ø—ñ—Ä–ª–µ—Ä. –†–∏–º —Å—É–¥—ã ”©—Ç–µ –∫”©–ø —Ç“±—Ç—ã–Ω“ì–∞–Ω.", fact: "II “ì–∞—Å—ã—Ä–¥—ã“£ —Å–æ“£—ã–Ω–¥–∞ –†–∏–º–¥–µ —Å—É–±“±—Ä“õ–∞“õ—Ç–∞—Ä –º–µ–Ω —Ç–µ—Ä–º–∞–ª–∞—Ä–¥—ã —Å—É–º–µ–Ω “õ–∞–º—Ç–∏—Ç—ã–Ω 11 —ñ—Ä—ñ –∞–∫–≤–µ–¥—É–∫ –±–æ–ª–¥—ã." }
                ]
            },
            en: {
                title: "The Eternal City",
                subtitle: "Life and Manners of Million-strong Rome",
                visualTitle: "Map of Leisure and Daily Life",
                hint: "Click on landmark sites to immerse in Roman life",
                placeholderTitle: "Bread and Circuses!",
                placeholderText: "Rome was the center of the world, a metropolis of unprecedented engineering and stark contrasts. Explore the map.",
                labelLife: "Roman Life Detail:",
                hint1: "Great Games", hint2: "Baths Culture",
                card1Title: "Insulae - High-rises",
                card1Text: "Multi-story apartment blocks for the commoners. Often dangerous, they were the heart of Rome's overcrowded streets.",
                card2Title: "The Noble Domus",
                card2Text: "A private mansion centered around an atrium. A private paradise of marble, water, and art.",
                card3Title: "Bread and Circuses",
                card3Text: "The imperial policy of providing free food and entertainment to keep the urban masses pacified.",
                footerQuote: "¬´All roads lead to Rome, but in Rome they lead either to the glory of the Forum or the soot of the insulae.¬ª",
                nodes: [
                    { id: 1, tag: "Heart", title: "Roman Forum", desc: "The political, religious, and economic center. It housed the Senate, major temples, and public platforms for orators.", fact: "The 'Miliarium Aureum' (Golden Milestone) marked the point where all Roman roads theoretically converged." },
                    { id: 2, tag: "Arena", title: "The Colosseum", desc: "The Flavian Amphitheatre, an engineering marvel seating 50,000. It hosted gladiatorial combat and wild beast hunts.", fact: "It featured a retractable awning called the velarium to protect spectators from the hot sun." },
                    { id: 3, tag: "Leisure", title: "Baths (Thermae)", desc: "Public complexes for hygiene, fitness, and socializing. Baths featured hot, warm, and cold rooms along with libraries.", fact: "Romans used a curved metal tool called a strigil to scrape oil and dirt off their bodies instead of soap." },
                    { id: 4, tag: "Racing", title: "Circus Maximus", desc: "The massive stadium for chariot racing, the most popular sport in the Empire. It could hold over 150,000 fans.", fact: "Charioteers raced seven laps, often risking death at the sharp turns called metae." },
                    { id: 5, tag: "Hydraulics", title: "Aqueducts", desc: "Stone structures using gravity to transport water from distant springs. They provided the city with 1 million cubic meters of water daily.", fact: "The water was so abundant that Rome was nicknamed the 'City of Fountains'." }
                ]
            }
        };

        let currentLang = 'ru';
        const canvas = document.getElementById('cityMapCanvas');
        const ctx = canvas.getContext('2d');
        let canvasNodes = [];

        function setLang(lang) {
            currentLang = lang;
            document.querySelectorAll('.btn-lang').forEach(btn => btn.classList.remove('active'));
            document.getElementById(`lang-${lang}`).classList.add('active');

            const t = translations[lang];
            document.getElementById('main-title').innerText = t.title;
            document.getElementById('sub-title').innerText = t.subtitle;
            document.getElementById('visual-title').innerText = t.visualTitle;
            document.getElementById('hint').innerText = t.hint;
            document.getElementById('placeholder-title').innerText = t.placeholderTitle;
            document.getElementById('placeholder-text').innerText = t.placeholderText;
            document.getElementById('label-life').innerText = t.labelLife;
            document.getElementById('hint-1').innerText = t.hint1;
            document.getElementById('hint-2').innerText = t.hint2;
            document.getElementById('card1-title').innerText = t.card1Title;
            document.getElementById('card1-text').innerText = t.card1Text;
            document.getElementById('card2-title').innerText = t.card2Title;
            document.getElementById('card2-text').innerText = t.card2Text;
            document.getElementById('card3-title').innerText = t.card3Title;
            document.getElementById('card3-text').innerText = t.card3Text;
            document.getElementById('footer-quote').innerText = t.footerQuote;

            if (!document.getElementById('info-data').classList.contains('hidden')) {
                const activeId = parseInt(document.getElementById('info-data').dataset.activeId);
                showNodeInfo(activeId);
            }
            drawCanvas();
        }

        function resizeCanvas() {
            canvas.width = canvas.parentElement.clientWidth;
            canvas.height = 450;
            drawCanvas();
        }

        function drawCanvas() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            const cx = canvas.width / 2;
            const cy = canvas.height / 2;

            // Draw Stylized Tiber River
            ctx.strokeStyle = 'rgba(56, 189, 248, 0.2)';
            ctx.lineWidth = 15;
            ctx.beginPath();
            ctx.moveTo(cx - 150, 0);
            ctx.bezierCurveTo(cx - 100, 150, cx - 180, 300, cx - 120, 450);
            ctx.stroke();

            const nodesData = [
                { id: 1, x: cx, y: cy - 20, icon: "üèõÔ∏è" },       // Forum
                { id: 2, x: cx + 120, y: cy + 40, icon: "üèüÔ∏è" }, // Colosseum
                { id: 3, x: cx - 40, y: cy - 120, icon: "üõÅ" }, // Baths
                { id: 4, x: cx - 20, y: cy + 120, icon: "üêé" }, // Circus
                { id: 5, x: cx + 100, y: cy - 100, icon: "üíß" } // Aqueduct
            ];

            canvasNodes = [];
            const nodes = translations[currentLang].nodes;

            nodesData.forEach((pos, i) => {
                const nodeInfo = nodes[i];
                
                const grad = ctx.createRadialGradient(pos.x, pos.y, 5, pos.x, pos.y, 45);
                grad.addColorStop(0, 'rgba(217, 119, 6, 0.3)');
                grad.addColorStop(1, 'transparent');
                ctx.fillStyle = grad;
                ctx.beginPath();
                ctx.arc(pos.x, pos.y, 45, 0, Math.PI * 2);
                ctx.fill();

                ctx.fillStyle = '#92400e';
                ctx.beginPath();
                ctx.arc(pos.x, pos.y, 18, 0, Math.PI * 2);
                ctx.fill();
                ctx.strokeStyle = 'white';
                ctx.lineWidth = 2;
                ctx.stroke();

                ctx.fillStyle = 'white';
                ctx.font = '14px Inter';
                ctx.textAlign = 'center';
                ctx.textBaseline = 'middle';
                ctx.fillText(pos.icon, pos.x, pos.y);

                ctx.fillStyle = '#fff7ed';
                ctx.font = 'bold 9px Montserrat';
                ctx.fillText(nodeInfo.tag.toUpperCase(), pos.x, pos.y + 40);

                canvasNodes.push({ x: pos.x, y: pos.y, r: 40, id: nodeInfo.id });
            });
        }

        function showNodeInfo(id) {
            const node = translations[currentLang].nodes.find(n => n.id === id);
            document.getElementById('info-placeholder').classList.add('hidden');
            const dataPanel = document.getElementById('info-data');
            dataPanel.classList.remove('hidden');
            dataPanel.dataset.activeId = id;

            document.getElementById('info-tag').innerText = node.tag;
            document.getElementById('info-title').innerText = node.title;
            document.getElementById('info-desc').innerText = node.desc;
            document.getElementById('info-fact').innerText = node.fact;
        }

        canvas.addEventListener('click', (e) => {
            const rect = canvas.getBoundingClientRect();
            const mouseX = e.clientX - rect.left;
            const mouseY = e.clientY - rect.top;

            canvasNodes.forEach(node => {
                const dist = Math.sqrt((mouseX - node.x) ** 2 + (mouseY - node.y) ** 2);
                if (dist < node.r) {
                    showNodeInfo(node.id);
                }
            });
        });

        window.onload = () => { resizeCanvas(); setLang('ru'); };
        window.onresize = resizeCanvas;
    </script>

<script type="text/javascript" src="qrc:///qtwebchannel/qwebchannel.js"></script>
<script>
    function goBack() {
        console.log('goBack() –≤—ã–∑–≤–∞–Ω–∞');
        if (typeof bridge !== 'undefined' && bridge) {
            console.log('Bridge –Ω–∞–π–¥–µ–Ω, –≤—ã–∑—ã–≤–∞—é onBackClicked()');
            bridge.onBackClicked();
        } else {
            console.log('Bridge –Ω–µ –Ω–∞–π–¥–µ–Ω!');
        }
    }

    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è QWebChannel
    document.addEventListener('DOMContentLoaded', function() {
        console.log('–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è QWebChannel...');

        if (typeof QWebChannel !== 'undefined' && typeof qt !== 'undefined') {
            try {
                new QWebChannel(qt.webChannelTransport, function(channel) {
                    window.bridge = channel.objects.bridge;
                    console.log('‚úÖ Bridge –ø–æ–¥–∫–ª—é—á–µ–Ω!');
                });
            } catch(e) {
                console.error('‚ùå QWebChannel –æ—à–∏–±–∫–∞:', e);
            }
        } else {
            console.warn('‚ö†Ô∏è QWebChannel –∏–ª–∏ qt –Ω–µ –Ω–∞–π–¥–µ–Ω');
        }
    });
</script>

</body>
</html>