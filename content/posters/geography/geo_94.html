<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nature of North America</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;600&family=Montserrat:wght@700&display=swap" rel="stylesheet">
    <style>
        body { background: #020617; color: white; min-height: 100vh; font-family: 'Inter'; }
        .glass { background: rgba(255, 255, 255, 0.05); border: 1px solid rgba(255, 255, 255, 0.1); backdrop-filter: blur(10px); }
        .rounded-custom { border-radius: 2rem; }
    </style>
</head>
<body class="p-8">

<!-- КНОПКА НАЗАД -->
<div style="position: fixed; top: 20px; left: 20px; z-index: 10000;">
    <button onclick="goBack()" style="
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        border: none;
        color: white;
        padding: 12px 24px;
        border-radius: 10px;
        font-size: 16px;
        font-weight: 600;
        cursor: pointer;
        box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);
        transition: all 0.3s ease;
        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;
    " onmouseover="this.style.transform='translateX(-5px)'; this.style.boxShadow='0 6px 20px rgba(102, 126, 234, 0.6)';" 
       onmouseout="this.style.transform='translateX(0)'; this.style.boxShadow='0 4px 15px rgba(102, 126, 234, 0.4)';">
        ← Назад
    </button>
</div>

    <header class="mb-8 border-b border-white/20 pb-4 flex justify-between">
        <h1 class="text-3xl font-montserrat text-blue-200" id="title"></h1>
        <div class="flex gap-2"><button onclick="setL('ru')" class="text-xs font-bold hover:text-blue-400">RU</button><button onclick="setL('en')" class="text-xs font-bold hover:text-blue-400">EN</button></div>
    </header>

    <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
        <div class="glass rounded-custom p-4 relative h-[400px]">
            <canvas id="natCanvas" class="w-full h-full bg-black/30 rounded-xl"></canvas>
            <div class="absolute bottom-4 left-4 text-xs text-blue-300">RELIEF PROFILE: West -> East</div>
        </div>

        <div class="flex flex-col gap-6">
            <div class="glass p-6 rounded-xl border-l-4 border-blue-500">
                <h3 id="h1" class="font-bold text-xl mb-2 text-blue-100"></h3>
                <p id="t1" class="text-sm text-gray-400"></p>
            </div>
            <div class="glass p-6 rounded-xl border-l-4 border-green-500">
                <h3 id="h2" class="font-bold text-xl mb-2 text-green-100"></h3>
                <p id="t2" class="text-sm text-gray-400"></p>
            </div>
            <div class="glass p-6 rounded-xl border-l-4 border-yellow-500">
                <h3 id="h3" class="font-bold text-xl mb-2 text-yellow-100"></h3>
                <p id="t3" class="text-sm text-gray-400"></p>
            </div>
        </div>
    </div>

    <script>
        const d = {
            ru: {
                t: "Природа Северной Америки",
                h1: "Рельеф", t1: "Меридиональное расположение. Запад — высокие горы Кордильеры. Восток — древние горы Аппалачи. Центр — Великие и Центральные равнины.",
                h2: "Климат", t2: "Представлены все пояса, кроме экваториального. Меридиональные горные цепи создают 'трубу' для проникновения арктического воздуха на юг (торнадо).",
                h3: "Воды", t3: "Богата внутренними водами. Миссисипи — главная речная артерия. Великие озера — крупнейшее скопление пресной воды."
            },
            en: {
                t: "Nature of North America",
                h1: "Relief", t1: "Meridional layout. West — high Cordilleras. East — ancient Appalachians. Center — Great and Central Plains.",
                h2: "Climate", t2: "All zones except equatorial. N-S mountain ranges create a 'channel' for arctic air (causing tornadoes).",
                h3: "Waters", t3: "Rich in inland waters. Mississippi is the main artery. The Great Lakes are the largest freshwater system."
            }
        };
        let cx, cvs;

        window.setL = (l) => {
            const c = d[l] || d['en'];
            document.getElementById('title').textContent = c.t;
            document.getElementById('h1').textContent = c.h1; document.getElementById('t1').textContent = c.t1;
            document.getElementById('h2').textContent = c.h2; document.getElementById('t2').textContent = c.t2;
            document.getElementById('h3').textContent = c.h3; document.getElementById('t3').textContent = c.t3;
        }

        function draw() {
            const w = cvs.width, h = cvs.height;
            cx.clearRect(0,0,w,h);
            
            // Profile
            cx.fillStyle = '#1e293b';
            cx.beginPath();
            cx.moveTo(0, h);
            cx.lineTo(0, h*0.8);
            cx.lineTo(w*0.2, h*0.2); // Cordillera
            cx.lineTo(w*0.4, h*0.6); // Great Plains
            cx.lineTo(w*0.6, h*0.7); // Central Plains
            cx.lineTo(w*0.8, h*0.5); // Appalachians
            cx.lineTo(w, h*0.8);
            cx.lineTo(w, h);
            cx.fill();

            // Snow on Cordillera
            cx.fillStyle = 'white';
            cx.beginPath(); cx.moveTo(w*0.2, h*0.2); cx.lineTo(w*0.15, h*0.35); cx.lineTo(w*0.25, h*0.35); cx.fill();

            requestAnimationFrame(draw);
        }

        window.onload = () => {
            cvs = document.getElementById('natCanvas'); cx = cvs.getContext('2d');
            const rs = () => { cvs.width = cvs.parentElement.clientWidth; cvs.height = cvs.parentElement.clientHeight; };
            window.addEventListener('resize', rs); rs();
            setL('ru'); draw();
        }
    </script>

<script type="text/javascript" src="qrc:///qtwebchannel/qwebchannel.js"></script>
<script>
    function goBack() {
        console.log('goBack() вызвана');
        if (typeof bridge !== 'undefined' && bridge) {
            console.log('Bridge найден, вызываю onBackClicked()');
            bridge.onBackClicked();
        } else {
            console.log('Bridge не найден!');
        }
    }

    // Инициализация QWebChannel
    document.addEventListener('DOMContentLoaded', function() {
        console.log('Инициализация QWebChannel...');

        if (typeof QWebChannel !== 'undefined' && typeof qt !== 'undefined') {
            try {
                new QWebChannel(qt.webChannelTransport, function(channel) {
                    window.bridge = channel.objects.bridge;
                    console.log('✅ Bridge подключен!');
                });
            } catch(e) {
                console.error('❌ QWebChannel ошибка:', e);
            }
        } else {
            console.warn('⚠️ QWebChannel или qt не найден');
        }
    });
</script>

</body>
</html>