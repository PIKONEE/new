<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Biosphere: The Earth's Living Shell</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600&family=Montserrat:wght@700;800&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background: radial-gradient(circle at center, #064e3b, #022c22, #000);
            color: white; min-height: 100vh;
        }
        .heading-font { font-family: 'Montserrat', sans-serif; }
        .glass { background: rgba(255, 255, 255, 0.05); backdrop-filter: blur(20px); border: 1px solid rgba(255, 255, 255, 0.1); }
        .rounded-custom { border-radius: 2.5rem; }
        canvas { border-radius: 2rem; }
        .lang-btn.active { background: #10b981; color: white; font-weight: 800; }
        @keyframes pulse-green { 0% { box-shadow: 0 0 0 0 rgba(16, 185, 129, 0.4); } 70% { box-shadow: 0 0 0 15px rgba(16, 185, 129, 0); } 100% { box-shadow: 0 0 0 0 rgba(16, 185, 129, 0); } }
        .animate-pulse-green { animation: pulse-green 2s infinite; }
    </style>
</head>
<body class="p-4 md:p-10">

<!-- –ö–ù–û–ü–ö–ê –ù–ê–ó–ê–î -->
<div style="position: fixed; top: 20px; left: 20px; z-index: 10000;">
    <button onclick="goBack()" style="
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        border: none;
        color: white;
        padding: 12px 24px;
        border-radius: 10px;
        font-size: 16px;
        font-weight: 600;
        cursor: pointer;
        box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);
        transition: all 0.3s ease;
        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;
    " onmouseover="this.style.transform='translateX(-5px)'; this.style.boxShadow='0 6px 20px rgba(102, 126, 234, 0.6)';" 
       onmouseout="this.style.transform='translateX(0)'; this.style.boxShadow='0 4px 15px rgba(102, 126, 234, 0.4)';">
        ‚Üê –ù–∞–∑–∞–¥
    </button>
</div>


    <header class="glass rounded-custom p-8 mb-8 flex flex-col md:flex-row justify-between items-center border-b-2 border-emerald-500/30">
        <div class="flex items-center gap-4">
            <div class="w-14 h-14 bg-emerald-600 rounded-2xl flex items-center justify-center text-3xl animate-pulse-green">üåø</div>
            <div>
                <h1 id="main-title" class="heading-font text-3xl md:text-5xl uppercase tracking-tighter text-emerald-400"></h1>
                <p id="sub-title" class="mt-1 text-white/40 font-light tracking-widest text-[10px] uppercase"></p>
            </div>
        </div>
        <div class="flex gap-2 mt-4 md:mt-0">
            <button onclick="window.setLang('ru')" id="btn-ru" class="lang-btn px-6 py-2 rounded-xl border border-white/20 text-xs font-bold transition-all">RU</button>
            <button onclick="window.setLang('kz')" id="btn-kz" class="lang-btn px-6 py-2 rounded-xl border border-white/20 text-xs font-bold transition-all">KZ</button>
            <button onclick="window.setLang('en')" id="btn-en" class="lang-btn px-6 py-2 rounded-xl border border-white/20 text-xs font-bold transition-all">EN</button>
        </div>
    </header>

    <main class="grid grid-cols-1 lg:grid-cols-12 gap-8 mb-8">
        <div class="lg:col-span-7 glass rounded-custom p-8 flex flex-col relative overflow-hidden min-h-[500px]">
            <h2 id="canvas-heading" class="heading-font text-xl text-emerald-200 uppercase mb-8 self-start tracking-widest"></h2>
            <canvas id="bioCanvas" class="w-full h-full bg-black/30"></canvas>
            <p id="canvas-hint" class="mt-4 text-center text-[10px] text-white/30 uppercase tracking-[0.5em]"></p>
        </div>

        <div class="lg:col-span-5 glass rounded-custom p-10 flex flex-col justify-center border-l-4 border-emerald-500">
            <h3 id="info-title" class="heading-font text-4xl mb-6 text-emerald-300"></h3>
            <div id="info-text" class="text-lg font-light leading-relaxed text-white/80 space-y-6"></div>
            <div class="mt-10 p-6 bg-emerald-500/10 rounded-3xl border border-emerald-500/20">
                <div class="text-[10px] uppercase text-emerald-400 mb-2 font-bold tracking-widest" id="label-limits">Limits of Life</div>
                <div class="grid grid-cols-3 gap-4 text-center">
                    <div><div class="text-xs opacity-50">Atmosphere</div><div class="font-bold text-emerald-200">~20 km</div></div>
                    <div><div class="text-xs opacity-50">Hydrosphere</div><div class="font-bold text-emerald-200">11 km</div></div>
                    <div><div class="text-xs opacity-50">Lithosphere</div><div class="font-bold text-emerald-200">~4 km</div></div>
                </div>
            </div>
        </div>
    </main>

    <section class="grid grid-cols-1 md:grid-cols-3 gap-8">
        <div class="glass rounded-custom p-8"><h4 id="c1-t" class="heading-font text-emerald-400 mb-2"></h4><p id="c1-d" class="text-sm text-white/60"></p></div>
        <div class="glass rounded-custom p-8"><h4 id="c2-t" class="heading-font text-emerald-400 mb-2"></h4><p id="c2-d" class="text-sm text-white/60"></p></div>
        <div class="glass rounded-custom p-8"><h4 id="c3-t" class="heading-font text-emerald-400 mb-2"></h4><p id="c3-d" class="text-sm text-white/60"></p></div>
    </section>

    <script>
        const translations = {
            ru: {
                title: "–ë–∏–æ—Å—Ñ–µ—Ä–∞", subtitle: "–°—Ñ–µ—Ä–∞ –∂–∏–∑–Ω–∏ –Ω–∞ –ó–µ–º–ª–µ",
                canvasHeading: "–ú–æ–¥–µ–ª—å –≥—Ä–∞–Ω–∏—Ü –∂–∏–∑–Ω–∏", canvasHint: "–ñ–∏–∑–Ω—å –ø—Ä–æ–Ω–∏–∫–∞–µ—Ç –≤–æ –≤—Å–µ –æ–±–æ–ª–æ—á–∫–∏ –ó–µ–º–ª–∏",
                labelLimits: "–ì—Ä–∞–Ω–∏—Ü—ã –±–∏–æ—Å—Ñ–µ—Ä—ã",
                defaultTitle: "–ñ–∏–≤–∞—è –æ–±–æ–ª–æ—á–∫–∞",
                defaultText: "–ë–∏–æ—Å—Ñ–µ—Ä–∞ ‚Äî —ç—Ç–æ –∑–µ–º–Ω–∞—è –æ–±–æ–ª–æ—á–∫–∞, –≤ –∫–æ—Ç–æ—Ä–æ–π –æ–±–∏—Ç–∞—é—Ç –∂–∏–≤—ã–µ –æ—Ä–≥–∞–Ω–∏–∑–º—ã –∏ –∫–æ—Ç–æ—Ä–∞—è —Å–æ–∑–¥–∞–Ω–∞ –∏–º–∏. –û–Ω–∞ –æ—Ö–≤–∞—Ç—ã–≤–∞–µ—Ç –Ω–∏–∂–Ω—é—é —á–∞—Å—Ç—å –∞—Ç–º–æ—Å—Ñ–µ—Ä—ã, –≤—Å—é –≥–∏–¥—Ä–æ—Å—Ñ–µ—Ä—É –∏ –≤–µ—Ä—Ö–Ω—é—é —á–∞—Å—Ç—å –ª–∏—Ç–æ—Å—Ñ–µ—Ä—ã.",
                cards: [
                    { t: "–≠–¥—É–∞—Ä–¥ –ó—é—Å—Å", d: "–ê–≤—Å—Ç—Ä–∏–π—Å–∫–∏–π –≥–µ–æ–ª–æ–≥, –∫–æ—Ç–æ—Ä—ã–π –≤ 1875 –≥–æ–¥—É –≤–≤–µ–ª —Ç–µ—Ä–º–∏–Ω '–±–∏–æ—Å—Ñ–µ—Ä–∞' –≤ –Ω–∞—É—á–Ω—ã–π –æ–±–æ—Ä–æ—Ç." },
                    { t: "–í.–ò. –í–µ—Ä–Ω–∞–¥—Å–∫–∏–π", d: "–°–æ–∑–¥–∞—Ç–µ–ª—å —Ü–µ–ª–æ—Å—Ç–Ω–æ–≥–æ —É—á–µ–Ω–∏—è –æ –±–∏–æ—Å—Ñ–µ—Ä–µ –∫–∞–∫ –æ –≥–ª–æ–±–∞–ª—å–Ω–æ–π —Å–∏—Å—Ç–µ–º–µ –∏ –∂–∏–≤–æ–π —Å–∏–ª–µ –ø–ª–∞–Ω–µ—Ç—ã." },
                    { t: "–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã", d: "–ñ–∏–≤–æ–µ –≤–µ—â–µ—Å—Ç–≤–æ (–æ—Ä–≥–∞–Ω–∏–∑–º—ã), –∫–æ—Å–Ω–æ–µ (–∫–∞–º–Ω–∏, –≥–∞–∑—ã), –±–∏–æ–∫–æ—Å–Ω–æ–µ (–ø–æ—á–≤–∞) –∏ –±–∏–æ–≥–µ–Ω–Ω–æ–µ (–Ω–µ—Ñ—Ç—å, –º–µ–ª)." }
                ]
            },
            kz: {
                title: "–ë–∏–æ—Å—Ñ–µ—Ä–∞", subtitle: "–ñ–µ—Ä–¥–µ–≥—ñ —Ç—ñ—Ä—à—ñ–ª—ñ–∫ “õ–∞–±–∞—Ç—ã",
                canvasHeading: "–¢—ñ—Ä—à—ñ–ª—ñ–∫ —à–µ–∫–∞—Ä–∞–ª–∞—Ä—ã–Ω—ã“£ –º–æ–¥–µ–ª—ñ", canvasHint: "–¢—ñ—Ä—à—ñ–ª—ñ–∫ –±–∞—Ä–ª—ã“õ “õ–∞–±—ã“õ—Ç–∞—Ä“ì–∞ –µ–Ω–µ–¥—ñ",
                labelLimits: "–ë–∏–æ—Å—Ñ–µ—Ä–∞ —à–µ–∫–∞—Ä–∞–ª–∞—Ä—ã",
                defaultTitle: "–¢—ñ—Ä—ñ “õ–∞–±—ã“õ",
                defaultText: "–ë–∏–æ—Å—Ñ–µ—Ä–∞ ‚Äî —Ç—ñ—Ä—ñ –æ—Ä–≥–∞–Ω–∏–∑–º–¥–µ—Ä “õ–æ–Ω—ã—Å—Ç–∞–Ω“ì–∞–Ω –∂”ô–Ω–µ –æ–ª–∞—Ä–¥—ã“£ —ñ—Å-”ô—Ä–µ–∫–µ—Ç—ñ –Ω”ô—Ç–∏–∂–µ—Å—ñ–Ω–¥–µ ”©–∑–≥–µ—Ä–≥–µ–Ω –ñ–µ—Ä “õ–∞–±—ã“ì—ã. –û–ª –∞—Ç–º–æ—Å—Ñ–µ—Ä–∞–Ω—ã“£ —Ç”©–º–µ–Ω–≥—ñ –±”©–ª—ñ–≥—ñ–Ω, –±“Ø–∫—ñ–ª –≥–∏–¥—Ä–æ—Å—Ñ–µ—Ä–∞–Ω—ã –∂”ô–Ω–µ –ª–∏—Ç–æ—Å—Ñ–µ—Ä–∞–Ω—ã“£ –∂–æ“ì–∞—Ä“ì—ã –±”©–ª—ñ–≥—ñ–Ω “õ–∞–º—Ç–∏–¥—ã.",
                cards: [
                    { t: "–≠–¥—É–∞—Ä–¥ –ó—é—Å—Å", d: "1875 –∂—ã–ª—ã '–±–∏–æ—Å—Ñ–µ—Ä–∞' —Ç–µ—Ä–º–∏–Ω—ñ–Ω “ì—ã–ª—ã–º“ì–∞ –µ–Ω–≥—ñ–∑–≥–µ–Ω –∞–≤—Å—Ç—Ä–∏—è–ª—ã“õ –≥–µ–æ–ª–æ–≥." },
                    { t: "–í.–ò. –í–µ—Ä–Ω–∞–¥—Å–∫–∏–π", d: "–ë–∏–æ—Å—Ñ–µ—Ä–∞ —Ç—É—Ä–∞–ª—ã —ñ–ª—ñ–º–Ω—ñ“£ –Ω–µ–≥—ñ–∑—ñ–Ω “õ–∞–ª–∞—É—à—ã, –æ–Ω—ã –ø–ª–∞–Ω–µ—Ç–∞–Ω—ã“£ —Ç—ñ—Ä—ñ –∫“Ø—à—ñ —Ä–µ—Ç—ñ–Ω–¥–µ —Å–∏–ø–∞—Ç—Ç–∞–¥—ã." },
                    { t: "–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—Ç–µ—Ä", d: "–¢—ñ—Ä—ñ –∑–∞—Ç (–æ—Ä–≥–∞–Ω–∏–∑–º–¥–µ—Ä), ”©–ª—ñ –∑–∞—Ç (—Ç–∞—Å—Ç–∞—Ä), –±–∏–æ”©–ª—ñ –∑–∞—Ç (—Ç–æ–ø—ã—Ä–∞“õ) –∂”ô–Ω–µ –±–∏–æ–≥–µ–Ω–¥—ñ –∑–∞—Ç (–º“±–Ω–∞–π)." }
                ]
            },
            en: {
                title: "The Biosphere", subtitle: "Earth's Sphere of Life",
                canvasHeading: "Limits of Life Model", canvasHint: "Life permeates all Earth's shells",
                labelLimits: "Biosphere Limits",
                defaultTitle: "The Living Shell",
                defaultText: "The biosphere is the Earth's shell inhabited by living organisms and shaped by their activities. it encompasses the lower atmosphere, the entire hydrosphere, and the upper part of the lithosphere.",
                cards: [
                    { t: "Eduard Suess", d: "The Austrian geologist who coined the term 'biosphere' in 1875." },
                    { t: "V. Vernadsky", d: "The founder of the modern teaching of the biosphere as a global planetary system." },
                    { t: "Components", d: "Living matter (organisms), inert matter (rocks), bio-inert (soil), and biogenic (oil, coal)." }
                ]
            }
        };

        let currentLang = 'ru', canvas, ctx;

        window.setLang = function(l) {
            currentLang = l;
            document.querySelectorAll('.lang-btn').forEach(btn => btn.classList.remove('active'));
            document.getElementById(`btn-${l}`).classList.add('active');
            updateUI();
        }

        function updateUI() {
            const t = translations[currentLang];
            document.getElementById('main-title').textContent = t.title;
            document.getElementById('sub-title').textContent = t.subtitle;
            document.getElementById('canvas-heading').textContent = t.canvasHeading;
            document.getElementById('canvas-hint').textContent = t.canvasHint;
            document.getElementById('label-limits').textContent = t.labelLimits;
            document.getElementById('info-title').textContent = t.defaultTitle;
            document.getElementById('info-text').textContent = t.defaultText;
            document.getElementById('c1-t').textContent = t.cards[0].t; document.getElementById('c1-d').textContent = t.cards[0].d;
            document.getElementById('c2-t').textContent = t.cards[1].t; document.getElementById('c2-d').textContent = t.cards[1].d;
            document.getElementById('c3-t').textContent = t.cards[2].t; document.getElementById('c3-d').textContent = t.cards[2].d;
        }

        function draw() {
            if(!ctx) return;
            ctx.clearRect(0,0,canvas.width, canvas.height);
            const w = canvas.width, h = canvas.height;
            const time = Date.now() * 0.001;

            // Layers
            // Atmosphere
            ctx.fillStyle = 'rgba(56, 189, 248, 0.2)'; ctx.fillRect(0, 0, w, h*0.5);
            // Hydrosphere (Blue)
            ctx.fillStyle = '#1e40af'; ctx.fillRect(0, h*0.5, w*0.4, h*0.3);
            // Lithosphere (Brown)
            ctx.fillStyle = '#422006'; ctx.fillRect(w*0.4, h*0.5, w*0.6, h*0.5);
            ctx.fillRect(0, h*0.8, w*0.4, h*0.2);

            // "Life" particles floating
            ctx.fillStyle = '#4ade80';
            for(let i=0; i<40; i++) {
                const px = (Math.sin(i*7 + time)*w + w)%w;
                const py = (Math.cos(i*3 + time)*h + h)%h;
                // Only draw in biosphere limits (approx)
                if(py > h*0.1 && py < h*0.9) {
                    ctx.beginPath(); ctx.arc(px, py, 3, 0, Math.PI*2); ctx.fill();
                }
            }

            requestAnimationFrame(draw);
        }

        window.onload = function() {
            canvas = document.getElementById('bioCanvas');
            ctx = canvas.getContext('2d');
            canvas.width = canvas.parentElement.clientWidth;
            canvas.height = canvas.parentElement.clientHeight || 500;
            setLang('ru'); draw();
        };
    </script>

<script type="text/javascript" src="qrc:///qtwebchannel/qwebchannel.js"></script>
<script>
    function goBack() {
        console.log('goBack() –≤—ã–∑–≤–∞–Ω–∞');
        if (typeof bridge !== 'undefined' && bridge) {
            console.log('Bridge –Ω–∞–π–¥–µ–Ω, –≤—ã–∑—ã–≤–∞—é onBackClicked()');
            bridge.onBackClicked();
        } else {
            console.log('Bridge –Ω–µ –Ω–∞–π–¥–µ–Ω!');
        }
    }

    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è QWebChannel
    document.addEventListener('DOMContentLoaded', function() {
        console.log('–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è QWebChannel...');

        if (typeof QWebChannel !== 'undefined' && typeof qt !== 'undefined') {
            try {
                new QWebChannel(qt.webChannelTransport, function(channel) {
                    window.bridge = channel.objects.bridge;
                    console.log('‚úÖ Bridge –ø–æ–¥–∫–ª—é—á–µ–Ω!');
                });
            } catch(e) {
                console.error('‚ùå QWebChannel –æ—à–∏–±–∫–∞:', e);
            }
        } else {
            console.warn('‚ö†Ô∏è QWebChannel –∏–ª–∏ qt –Ω–µ –Ω–∞–π–¥–µ–Ω');
        }
    });
</script>








<style data-oi-map-overlay>
.oi-map-btn{
  position:fixed; right:16px; bottom:16px; z-index:9999;
  padding:10px 14px; border-radius:999px; border:1px solid rgba(0,0,0,.15);
  background:#fff; cursor:pointer; font:600 14px/1.1 system-ui,-apple-system,Segoe UI,Roboto,Arial;
  box-shadow:0 8px 20px rgba(0,0,0,.12);
}
.oi-table-btn{
  position:fixed; right:120px; bottom:16px; z-index:9999;
  padding:10px 14px; border-radius:999px; border:1px solid rgba(0,0,0,.15);
  background:#fff; cursor:pointer; font:600 14px/1.1 system-ui,-apple-system,Segoe UI,Roboto,Arial;
  box-shadow:0 8px 20px rgba(0,0,0,.12);
}

.oi-map-backdrop{
  position:fixed; inset:0; background:rgba(0,0,0,.72); z-index:10000;
  display:none; align-items:center; justify-content:center; padding:18px;
}
.oi-map-backdrop[aria-hidden="false"]{ display:flex; }

.oi-map-modal{
  width:min(1200px, 100%); height:min(85vh, 900px);
  background:#111; border-radius:14px; overflow:hidden; position:relative;
  box-shadow:0 20px 60px rgba(0,0,0,.35);
}

.oi-map-close{
  position:absolute; top:10px; right:10px; z-index:3;
  width:40px; height:40px; border-radius:999px; border:1px solid rgba(255,255,255,.25);
  background:rgba(0,0,0,.35); color:#fff; cursor:pointer; font-size:22px;
}

.oi-map-viewport{
  width:100%; height:100%; overflow:auto; -webkit-overflow-scrolling:touch;
  touch-action: pan-x pan-y;
  background:#000;
  padding-top:62px; /* –º–µ—Å—Ç–æ –ø–æ–¥ —Ç—É–ª–±–∞—Ä */
}

.oi-map-img{
  display:block;
  transform-origin: 0 0;
  user-select:none; -webkit-user-drag:none;
}

.oi-map-toolbar{
  position:absolute; left:12px; top:12px; right:12px; z-index:2;
  display:flex; align-items:center; justify-content:space-between; gap:10px;
  pointer-events:none;
}

.oi-map-tabs{ display:flex; gap:8px; flex-wrap:wrap; pointer-events:auto; }

.oi-map-tab{
  min-width:36px; height:34px; padding:0 10px;
  border-radius:10px;
  border:1px solid rgba(255,255,255,.22);
  background:rgba(0,0,0,.35); color:#fff;
  cursor:pointer; font:600 14px system-ui,-apple-system,Segoe UI,Roboto,Arial;
}

.oi-map-tab.is-active{
  background:rgba(255,255,255,.12);
  border-color: rgba(255,255,255,.45);
}

.oi-map-hint{
  pointer-events:none;
  color:#fff; opacity:.85; font:12px/1.2 system-ui,-apple-system,Segoe UI,Roboto,Arial;
  background:rgba(0,0,0,.35); border:1px solid rgba(255,255,255,.18);
  padding:8px 10px; border-radius:10px;
}
</style>

<button class="oi-map-btn" type="button" data-oi-map-btn>üó∫Ô∏è –ö–∞—Ä—Ç–∞</button>


<div class="oi-map-backdrop" aria-hidden="true" data-oi-map-backdrop>
  <div class="oi-map-modal" role="dialog" aria-modal="true" aria-label="–ö–∞—Ä—Ç–∞">
    <button class="oi-map-close" type="button" aria-label="–ó–∞–∫—Ä—ã—Ç—å" data-oi-map-close>√ó</button>

    <div class="oi-map-toolbar">
      <div class="oi-map-tabs">
        <button type="button" class="oi-map-tab is-active" data-oi-map-tab="1">1</button>
<button type="button" class="oi-map-tab" data-oi-map-tab="2">2</button>
<button type="button" class="oi-map-tab" data-oi-map-tab="3">3</button>
<button type="button" class="oi-map-tab" data-oi-map-tab="4">4</button>
<button type="button" class="oi-map-tab" data-oi-map-tab="5">5</button>
<button type="button" class="oi-map-tab" data-oi-map-tab="6">6</button>
<button type="button" class="oi-map-tab" data-oi-map-tab="7">7</button>
      </div>
      <div class="oi-map-hint">–ö–æ–ª—ë—Å–∏–∫–æ/—Ç—Ä–µ–∫–ø–∞–¥ ‚Äî –∑—É–º ‚Ä¢ Esc ‚Äî –∑–∞–∫—Ä—ã—Ç—å</div>
    </div>

    <div class="oi-map-viewport" data-oi-map-viewport>
      <img class="oi-map-img" data-oi-map-img data-map="1" src="../../assets/maps/karta_1.png" alt="map 1" style="display:block;">
<img class="oi-map-img" data-oi-map-img data-map="2" src="../../assets/maps/karta_2.png" alt="map 2" style="display:none;">
<img class="oi-map-img" data-oi-map-img data-map="3" src="../../assets/maps/karta_3.png" alt="map 3" style="display:none;">
<img class="oi-map-img" data-oi-map-img data-map="4" src="../../assets/maps/karta_4.png" alt="map 4" style="display:none;">
<img class="oi-map-img" data-oi-map-img data-map="5" src="../../assets/maps/karta_5.png" alt="map 5" style="display:none;">
<img class="oi-map-img" data-oi-map-img data-map="6" src="../../assets/maps/karta_6.png" alt="map 6" style="display:none;">
<img class="oi-map-img" data-oi-map-img data-map="7" src="../../assets/maps/karta_7.png" alt="map 7" style="display:none;">
    </div>
  </div>
</div>




<script data-oi-map-overlay>
(function(){
  // ====== MAPS ======
  const mapBtn = document.querySelector('[data-oi-map-btn]');
  const mapBackdrop = document.querySelector('[data-oi-map-backdrop]');
  const mapCloseBtn = document.querySelector('[data-oi-map-close]');
  const mapViewport = document.querySelector('[data-oi-map-viewport]');
  const mapTabs = Array.from(document.querySelectorAll('[data-oi-map-tab]'));
  const mapImgs = Array.from(document.querySelectorAll('[data-oi-map-img][data-map]'));

  // ====== MENDELEEV ======
  const tableBtn = document.querySelector('[data-oi-table-btn]');
  const tableBackdrop = document.querySelector('[data-oi-table-backdrop]');
  const tableCloseBtn = document.querySelector('[data-oi-table-close]');
  const tableViewport = document.querySelector('[data-oi-table-viewport]');
  const tableTabs = Array.from(document.querySelectorAll('[data-oi-table-tab]'));
  const tableImgs = Array.from(document.querySelectorAll('[data-oi-table-img][data-table]'));

  let scale = 1;

  function applyScale(){
    mapImgs.forEach(img => { img.style.transform = `scale(${scale})`; });
    tableImgs.forEach(img => { img.style.transform = `scale(${scale})`; });
  }

  function openBackdrop(backdrop){
    backdrop.setAttribute('aria-hidden','false');
    document.body.style.overflow = 'hidden';
  }
  function closeBackdrop(backdrop){
    backdrop.setAttribute('aria-hidden','true');
    document.body.style.overflow = '';
  }

  function showMap(n){
    mapImgs.forEach(img => {
      img.style.display = (img.getAttribute('data-map') === String(n)) ? 'block' : 'none';
    });
    mapTabs.forEach(t => t.classList.toggle('is-active', t.getAttribute('data-oi-map-tab') === String(n)));
    if(mapViewport){ mapViewport.scrollTop = 0; mapViewport.scrollLeft = 0; }
  }

  function showTable(n){
    tableImgs.forEach(img => {
      img.style.display = (img.getAttribute('data-table') === String(n)) ? 'block' : 'none';
    });
    tableTabs.forEach(t => t.classList.toggle('is-active', t.getAttribute('data-oi-table-tab') === String(n)));
    if(tableViewport){ tableViewport.scrollTop = 0; tableViewport.scrollLeft = 0; }
  }

  // MAP events
  if(mapBtn && mapBackdrop && mapCloseBtn && mapViewport && mapImgs.length){
    mapBtn.addEventListener('click', () => openBackdrop(mapBackdrop));
    mapCloseBtn.addEventListener('click', () => closeBackdrop(mapBackdrop));
    mapBackdrop.addEventListener('click', (e)=>{ if(e.target === mapBackdrop) closeBackdrop(mapBackdrop); });
    window.addEventListener('keydown', (e)=>{ if(e.key === 'Escape') closeBackdrop(mapBackdrop); });
    mapTabs.forEach(t => t.addEventListener('click', () => showMap(t.getAttribute('data-oi-map-tab'))));

    mapViewport.addEventListener('wheel', (e)=>{
      if(mapBackdrop.getAttribute('aria-hidden') !== 'false') return;
      e.preventDefault();
      const delta = -Math.sign(e.deltaY) * 0.1;
      scale = Math.min(4, Math.max(0.6, scale + delta));
      applyScale();
    }, {passive:false});

    showMap(1);
  }

  // TABLE events
  if(tableBtn && tableBackdrop && tableCloseBtn && tableViewport && tableImgs.length){
    tableBtn.addEventListener('click', () => openBackdrop(tableBackdrop));
    tableCloseBtn.addEventListener('click', () => closeBackdrop(tableBackdrop));
    tableBackdrop.addEventListener('click', (e)=>{ if(e.target === tableBackdrop) closeBackdrop(tableBackdrop); });
    window.addEventListener('keydown', (e)=>{ if(e.key === 'Escape') closeBackdrop(tableBackdrop); });
    tableTabs.forEach(t => t.addEventListener('click', () => showTable(t.getAttribute('data-oi-table-tab'))));

    tableViewport.addEventListener('wheel', (e)=>{
      if(tableBackdrop.getAttribute('aria-hidden') !== 'false') return;
      e.preventDefault();
      const delta = -Math.sign(e.deltaY) * 0.1;
      scale = Math.min(4, Math.max(0.6, scale + delta));
      applyScale();
    }, {passive:false});

    showTable(1);
  }

  applyScale();
})();
</script>
</body>
</html>