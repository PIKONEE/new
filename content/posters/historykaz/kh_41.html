<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–í–µ–ª–∏–∫–∏–π –®–µ–ª–∫–æ–≤—ã–π –ø—É—Ç—å –Ω–∞ —Ç–µ—Ä—Ä–∏—Ç–æ—Ä–∏–∏ –ö–∞–∑–∞—Ö—Å—Ç–∞–Ω–∞</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@700;900&family=Inter:wght@300;400;600&display=swap&subset=cyrillic,cyrillic-ext" rel="stylesheet">
    <style>
        body { font-family: 'Inter', sans-serif; background-color: #fdfcf6; color: #451a03; }
        h1, h2, h3 { font-family: 'Montserrat', sans-serif; }

        .silk-gradient {
            background: linear-gradient(135deg, #fefce8 0%, #fef3c7 50%, #fde68a 100%);
        }

        .premium-panel {
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(15px);
            border-radius: 3rem;
            border: 1px solid #d97706;
            transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .premium-panel:hover {
            border-color: #92400e;
            box-shadow: 0 30px 60px -12px rgba(146, 64, 14, 0.2);
        }

        .lang-active {
            background-color: #92400e;
            color: #ffffff;
            box-shadow: 0 10px 15px -3px rgba(146, 64, 14, 0.3);
        }

        canvas {
            cursor: pointer;
            border-radius: 2.5rem;
            background: #fff;
            box-shadow: inset 0 0 40px rgba(217, 119, 6, 0.05);
        }

        .info-card {
            background: white;
            border-radius: 2.5rem;
            border-bottom: 6px solid #b45309;
            padding: 2.5rem;
            transition: all 0.3s ease;
            height: 100%;
        }

        .info-card:hover {
            transform: translateY(-10px);
            border-color: #d97706;
            box-shadow: 0 20px 40px rgba(146, 64, 14, 0.1);
        }

        .route-badge {
            padding: 4px 14px;
            border-radius: 99px;
            font-size: 0.7rem;
            font-weight: 800;
            text-transform: uppercase;
            letter-spacing: 0.1em;
        }

        .south-route { background: #fee2e2; color: #991b1b; }
        .central-route { background: #fef3c7; color: #92400e; }
        .north-route { background: #dcfce7; color: #166534; }
    </style>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
</head>
<body class="silk-gradient min-h-screen pb-20">

<!-- Header (Strict text, no emoji) -->
    <header class="sticky top-0 z-50 bg-white/70 backdrop-blur-xl border-b border-amber-200 px-6 py-5">
        <div class="max-w-7xl mx-auto flex flex-col md:flex-row justify-between items-center gap-6">
            <h1 id="main-title" class="text-xl md:text-2xl font-black uppercase tracking-[0.2em] text-amber-950">–í–µ–ª–∏–∫–∏–π –®–µ–ª–∫–æ–≤—ã–π –ø—É—Ç—å –Ω–∞ —Ç–µ—Ä—Ä–∏—Ç–æ—Ä–∏–∏ –ö–∞–∑–∞—Ö—Å—Ç–∞–Ω–∞</h1>
            <div class="flex bg-amber-50 p-1 rounded-xl border border-amber-200">
                <button onclick="setLang('ru')" id="btn-ru" class="px-6 py-2 rounded-lg text-sm font-bold transition-all">RU</button>
                <button onclick="setLang('kz')" id="btn-kz" class="px-6 py-2 rounded-lg text-sm font-bold transition-all">KZ</button>
                <button onclick="setLang('en')" id="btn-en" class="px-6 py-2 rounded-lg text-sm font-bold transition-all">EN</button>
            </div>
        </div>
    </header>

    <main class="max-w-7xl mx-auto px-6 py-12 space-y-16">
        
        <!-- Section 1: Interactive Route Map (Custom Canvas) -->
        <div class="premium-panel p-8 md:p-12">
            <div class="grid grid-cols-1 lg:grid-cols-12 gap-12 items-center">
                <div class="lg:col-span-4 space-y-8">
                    <div id="badge" class="inline-block bg-amber-800 text-white px-5 py-1.5 rounded-full text-[10px] font-black uppercase tracking-widest">Trade Route Hub Analysis</div>
                    <h2 id="viz-title" class="text-3xl md:text-4xl font-black text-amber-950 leading-tight uppercase italic">–ö–∞—Ä—Ç–∞ —Ç—Ä–∞–Ω–∑–∏—Ç–∞</h2>
                    <p id="viz-desc" class="text-lg text-amber-900/70 font-light leading-relaxed">
                        –ö–∞–∑–∞—Ö—Å—Ç–∞–Ω –±—ã–ª –∫–ª—é—á–µ–≤—ã–º —É—á–∞—Å—Ç–∫–æ–º –ø—É—Ç–∏. –ù–∞–∂–º–∏—Ç–µ –Ω–∞ –æ—Å–Ω–æ–≤–Ω—ã–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è (–Æ–∂–Ω–æ–µ, –¶–µ–Ω—Ç—Ä–∞–ª—å–Ω–æ–µ, –°–µ–≤–µ—Ä–Ω–æ–µ) –Ω–∞ —Å—Ö–µ–º–µ, —á—Ç–æ–±—ã —É–≤–∏–¥–µ—Ç—å –∫–ª—é—á–µ–≤—ã–µ –≥–æ—Ä–æ–¥–∞ –∏ —Ç–æ–≤–∞—Ä—ã.
                    </p>
                    
                    <div id="info-panel" class="p-8 rounded-[2.5rem] bg-white border-l-8 border-amber-700 shadow-xl transition-all duration-500">
                        <h3 id="route-title" class="text-xl font-bold text-amber-900 mb-3 uppercase tracking-tighter">–ò—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ –ø—É—Ç–µ–π</h3>
                        <p id="route-desc" class="text-amber-800/70 text-sm leading-relaxed italic font-light">–í—ã–±–µ—Ä–∏—Ç–µ –æ–¥–Ω—É –∏–∑ —Ç—Ä–µ—Ö –ª–∏–Ω–∏–π –º–∞—Ä—à—Ä—É—Ç–∞ –Ω–∞ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–π –∫–∞—Ä—Ç–µ.</p>
                    </div>
                </div>
                
                <div class="lg:col-span-8 p-4 flex items-center justify-center relative min-h-[500px]">
                    <canvas id="routeCanvas"></canvas>
                    <div class="absolute top-8 left-12 text-[10px] text-amber-800/30 font-mono uppercase tracking-[0.4em]">Schematic of Silk Road Branches</div>
                </div>
            </div>
        </div>

        <!-- Section 2: Deep Historical Content -->
        <div class="space-y-12">
            <h2 id="plan-title" class="text-center text-3xl font-black text-amber-950 uppercase tracking-[0.5em]">–≠–∫–æ–Ω–æ–º–∏–∫–∞ –∏ –ö—É–ª—å—Ç—É—Ä–∞</h2>
            
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-10">
                
                <!-- City Nodes -->
                <div class="info-card">
                    <div class="mb-4"><span class="route-badge south-route" id="tag-1">–ì–æ—Ä–æ–¥–∞-—É–∑–ª—ã</span></div>
                    <h3 id="c1-t" class="text-xl font-bold mb-4 uppercase text-amber-900">–¶–µ–Ω—Ç—Ä—ã –ü—Ä–æ—Ü–≤–µ—Ç–∞–Ω–∏—è</h3>
                    <p id="c1-d" class="text-stone-600 text-sm leading-relaxed mb-6">
                        –ì–æ—Ä–æ–¥–∞ **–¢–∞—Ä–∞–∑**, **–û—Ç—Ä–∞—Ä**, **–ò—Å–ø–∏–¥–∂–∞–±** –∏ **–°—ã–≥–Ω–∞–∫** –ø—Ä–æ—Ü–≤–µ—Ç–∞–ª–∏ –±–ª–∞–≥–æ–¥–∞—Ä—è —Ç–æ—Ä–≥–æ–≤–ª–µ. –¢–∞—Ä–∞–∑ –Ω–∞–∑—ã–≤–∞–ª–∏ ¬´–≥–æ—Ä–æ–¥–æ–º –∫—É–ø—Ü–æ–≤¬ª, –∞ –ò—Å–ø–∏–¥–∂–∞–± –±—ã–ª ¬´–≥–æ—Ä–æ–¥–æ–º-—Ä—ã–Ω–∫–æ–º¬ª, –æ—Å–≤–æ–±–æ–∂–¥–µ–Ω–Ω—ã–º –æ—Ç –Ω–∞–ª–æ–≥–æ–≤ –Ω–∞ –∑–µ–º–ª—é. –í —ç—Ç–∏—Ö —Ü–µ–Ω—Ç—Ä–∞—Ö —Ä–∞–±–æ—Ç–∞–ª–∏ –º–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω—ã–µ —Ä—ã–Ω–∫–∏, –∫–∞—Ä–∞–≤–∞–Ω-—Å–∞—Ä–∞–∏ –∏ –º–æ–Ω–µ—Ç–Ω—ã–µ –¥–≤–æ—Ä—ã.
                    </p>
                    <div class="text-[10px] font-black text-amber-700 uppercase tracking-widest italic">–°—ã–≥–Ω–∞–∫: –ü–æ—Ä—Ç –Ω–∞ –°—ã—Ä–¥–∞—Ä—å–µ</div>
                </div>

                <!-- Global Exchange -->
                <div class="info-card">
                    <div class="mb-4"><span class="route-badge central-route" id="tag-2">–û–±–º–µ–Ω</span></div>
                    <h3 id="c2-t" class="text-xl font-bold mb-4 uppercase text-amber-900">–¢–æ–≤–∞—Ä—ã –∏ –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏</h3>
                    <p id="c2-d" class="text-stone-600 text-sm leading-relaxed mb-6">
                        –ü—É—Ç—å —Å–≤—è–∑—ã–≤–∞–ª –í–æ—Å—Ç–æ–∫ –∏ –ó–∞–ø–∞–¥. –ò–∑ –ö–∏—Ç–∞—è –≤–µ–∑–ª–∏ —à–µ–ª–∫, —Ñ–∞—Ä—Ñ–æ—Ä –∏ –±—É–º–∞–≥—É. –ò–∑ –ò–Ω–¥–∏–∏ ‚Äî —Å–ø–µ—Ü–∏–∏ –∏ —Ö–ª–æ–ø–æ–∫. –ö–∞–∑–∞—Ö—Å—Ç–∞–Ω —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–ª **–ø–æ—Ä–æ—Å—Ç—ã—Ö –ª–æ—à–∞–¥–µ–π**, **—Å–µ—Ä–µ–±—Ä–æ**, **–ø—É—à–Ω–∏–Ω—É** –∏ **–∫–æ–Ω–µ–π**. –ü—É—Ç—å —Ç–∞–∫–∂–µ —Å—Ç–∞–ª –∫–∞–Ω–∞–ª–æ–º –ø–µ—Ä–µ–¥–∞—á–∏ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π (—Å—Ç–µ–∫–ª–æ–≤–∞—Ä–µ–Ω–∏–µ, –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–æ —à–µ–ª–∫–∞).
                    </p>
                    <div class="text-[10px] font-black text-amber-700 uppercase tracking-widest italic">–®–µ–ª–∫ ‚Äî –º–∏—Ä–æ–≤–∞—è –≤–∞–ª—é—Ç–∞</div>
                </div>

                <!-- Cultural Synthesis -->
                <div class="info-card">
                    <div class="mb-4"><span class="route-badge north-route" id="tag-3">–î–∏–ø–ª–æ–º–∞—Ç–∏—è</span></div>
                    <h3 id="c3-t" class="text-xl font-bold mb-4 uppercase text-amber-900">–î–∏–∞–ª–æ–≥ –ö—É–ª—å—Ç—É—Ä</h3>
                    <p id="c3-d" class="text-stone-600 text-sm leading-relaxed mb-6">
                        –ë–ª–∞–≥–æ–¥–∞—Ä—è –í–®–ü –≤ –ö–∞–∑–∞—Ö—Å—Ç–∞–Ω–µ –º–∏—Ä–Ω–æ —Å–æ—Å—É—â–µ—Å—Ç–≤–æ–≤–∞–ª–∏ **–ò—Å–ª–∞–º**, **–ë—É–¥–¥–∏–∑–º**, **–•—Ä–∏—Å—Ç–∏–∞–Ω—Å—Ç–≤–æ** –∏ **–ó–æ—Ä–æ–∞—Å—Ç—Ä–∏–∑–º**. –¢—é—Ä–∫—Å–∫–∏–µ –∫–∞–≥–∞–Ω—ã –æ–±–µ—Å–ø–µ—á–∏–≤–∞–ª–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∫–∞—Ä–∞–≤–∞–Ω–æ–≤ (¬´–í–µ–ª–∏–∫–∏–π —Ç—é—Ä–∫—Å–∫–∏–π –º–∏—Ä¬ª), –ø–æ–ª—É—á–∞—è –æ–≥—Ä–æ–º–Ω—É—é –ø—Ä–∏–±—ã–ª—å –∏ —Å—Ç–∞–Ω–æ–≤—è—Å—å –º–∏—Ä–æ–≤—ã–º–∏ –ø–æ—Å—Ä–µ–¥–Ω–∏–∫–∞–º–∏.
                    </p>
                    <div class="text-[10px] font-black text-amber-700 uppercase tracking-widest italic">568 –≥. ‚Äî –ü–æ—Å–æ–ª—å—Å—Ç–≤–æ –ú–∞–Ω–∏–∞—Ö–∞</div>
                </div>

            </div>

            <!-- Full Width Focus: Scientific Hubs -->
            <div class="bg-amber-900 p-10 md:p-16 rounded-[4rem] text-white shadow-2xl relative overflow-hidden">
                <div class="relative z-10 grid grid-cols-1 lg:grid-cols-2 gap-16 items-center">
                    <div>
                        <h3 id="science-t" class="text-3xl font-black mb-8 uppercase italic tracking-widest">–ò–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω—ã–π —Ç—Ä–∞–Ω–∑–∏—Ç</h3>
                        <p id="science-d" class="text-amber-100/70 text-xl font-light leading-relaxed mb-10">
                            –¢–æ—Ä–≥–æ–≤—ã–µ –ø—É—Ç–∏ —Å—Ç–∞–ª–∏ –º–∞–≥–∏—Å—Ç—Ä–∞–ª—è–º–∏ –∑–Ω–∞–Ω–∏–π. –í –≥–æ—Ä–æ–¥–∞—Ö –í–®–ü —Ä–∞–±–æ—Ç–∞–ª–∏ –∫—Ä—É–ø–Ω–µ–π—à–∏–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ –∏ –æ–±—Å–µ—Ä–≤–∞—Ç–æ—Ä–∏–∏. **–ê–ª—å-–§–∞—Ä–∞–±–∏**, —É—Ä–æ–∂–µ–Ω–µ—Ü –≥–æ—Ä–æ–¥–∞ –û—Ç—Ä–∞—Ä, —Å—Ç–∞–ª ¬´–í—Ç–æ—Ä—ã–º —É—á–∏—Ç–µ–ª–µ–º¬ª –º–∏—Ä–∞ –ø–æ—Å–ª–µ –ê—Ä–∏—Å—Ç–æ—Ç–µ–ª—è, –æ–±—ä–µ–¥–∏–Ω–∏–≤ –∞–Ω—Ç–∏—á–Ω—É—é –º—ã—Å–ª—å –∏ –≤–æ—Å—Ç–æ—á–Ω—É—é –º—É–¥—Ä–æ—Å—Ç—å –∏–º–µ–Ω–Ω–æ –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ –∫—É–ª—å—Ç—É—Ä–Ω–æ–≥–æ –æ–±–º–µ–Ω–∞ –®–µ–ª–∫–æ–≤–æ–≥–æ –ø—É—Ç–∏.
                        </p>
                        <div class="flex flex-wrap gap-4">
                            <div class="px-6 py-2 bg-white/10 rounded-2xl border border-white/20 text-xs font-black text-amber-400 uppercase tracking-widest">–û—Ç—Ä–∞—Ä—Å–∫–∞—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞</div>
                        </div>
                    </div>
                    <div class="flex justify-center relative">
                        <div class="w-80 h-80 border-2 border-dashed border-amber-500/20 rounded-full flex items-center justify-center animate-spin-slow">
                            <div class="text-8xl opacity-20">üìú</div>
                        </div>
                        <div class="absolute inset-0 flex items-center justify-center">
                            <div class="text-center">
                                <div class="text-6xl mb-4">üî¨</div>
                                <div id="sci-label" class="text-[10px] font-black uppercase text-amber-400 tracking-[0.5em]">Philosophy & Science</div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="absolute -top-20 -right-20 text-[20rem] opacity-5 font-black rotate-45 pointer-events-none uppercase">ARTERY</div>
            </div>
        </div>

    </main>

    <footer class="mt-20 py-20 bg-stone-950 text-stone-500 text-center border-t border-amber-900/20">
        <div class="max-w-4xl mx-auto px-6">
            <p id="footer-text" class="text-2xl md:text-3xl font-light italic leading-tight text-stone-400">
                ¬´–í–µ–ª–∏–∫–∏–π –®–µ–ª–∫–æ–≤—ã–π –ø—É—Ç—å –ø—Ä–µ–≤—Ä–∞—Ç–∏–ª –ö–∞–∑–∞—Ö—Å—Ç–∞–Ω –≤ —Å–µ—Ä–¥—Ü–µ –º–∏—Ä–∞, –≥–¥–µ –Ω–∞ –ø–µ—Ä–µ–∫—Ä–µ—Å—Ç–∫–µ –¥–æ—Ä–æ–≥ –∫–æ–≤–∞–ª–∞—Å—å –≥–ª–æ–±–∞–ª—å–Ω–∞—è –∏—Å—Ç–æ—Ä–∏—è —á–µ–ª–æ–≤–µ—á–µ—Å—Ç–≤–∞.¬ª
            </p>
            <div class="mt-10 h-1 w-24 bg-amber-900 mx-auto rounded-full"></div>
        </div>
    </footer>

    <script>
        const translations = {
            ru: {
                title: "–í–µ–ª–∏–∫–∏–π –®–µ–ª–∫–æ–≤—ã–π –ø—É—Ç—å –Ω–∞ —Ç–µ—Ä—Ä–∏—Ç–æ—Ä–∏–∏ –ö–∞–∑–∞—Ö—Å—Ç–∞–Ω–∞",
                vizTitle: "–ö–∞—Ä—Ç–∞ —Ç—Ä–∞–Ω–∑–∏—Ç–∞",
                vizDesc: "–ö–∞–∑–∞—Ö—Å—Ç–∞–Ω –±—ã–ª –∫–ª—é—á–µ–≤—ã–º —É—á–∞—Å—Ç–∫–æ–º –ø—É—Ç–∏. –ù–∞–∂–º–∏—Ç–µ –Ω–∞ –æ—Å–Ω–æ–≤–Ω—ã–µ –≤–µ—Ç–≤–∏ (–Æ–∂–Ω—É—é, –¶–µ–Ω—Ç—Ä–∞–ª—å–Ω—É—é, –°–µ–≤–µ—Ä–Ω—É—é) –Ω–∞ —Å—Ö–µ–º–µ –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞.",
                badge: "–ê–Ω–∞–ª–∏–∑ —Ç–æ—Ä–≥–æ–≤—ã—Ö –º–∞—Ä—à—Ä—É—Ç–æ–≤",
                routeTitleDefault: "–ò—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ –ø—É—Ç–µ–π",
                routeDescDefault: "–í—ã–±–µ—Ä–∏—Ç–µ –æ–¥–Ω—É –∏–∑ —Ç—Ä–µ—Ö –ª–∏–Ω–∏–π –º–∞—Ä—à—Ä—É—Ç–∞ –Ω–∞ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–π –∫–∞—Ä—Ç–µ.",
                planTitle: "–≠–∫–æ–Ω–æ–º–∏–∫–∞ –∏ –ö—É–ª—å—Ç—É—Ä–∞",
                tag1: "–ì–æ—Ä–æ–¥–∞-—É–∑–ª—ã", tag2: "–û–±–º–µ–Ω", tag3: "–î–∏–ø–ª–æ–º–∞—Ç–∏—è",
                c1T: "–¶–µ–Ω—Ç—Ä—ã –ü—Ä–æ—Ü–≤–µ—Ç–∞–Ω–∏—è", c1D: "–¢–∞—Ä–∞–∑, –û—Ç—Ä–∞—Ä –∏ –ò—Å–ø–∏–¥–∂–∞–± —Å—Ç–∞–ª–∏ –±–æ–≥–∞—Ç–µ–π—à–∏–º–∏ –≥–æ—Ä–æ–¥–∞–º–∏. –ó–¥–µ—Å—å —Ä–∞–±–æ—Ç–∞–ª–∏ –∫–∞—Ä–∞–≤–∞–Ω-—Å–∞—Ä–∞–∏, –∞ –∫—É–ø—Ü—ã –±—ã–ª–∏ –æ—Å–≤–æ–±–æ–∂–¥–µ–Ω—ã –æ—Ç –º–Ω–æ–≥–∏—Ö –Ω–∞–ª–æ–≥–æ–≤ –¥–ª—è —Å—Ç–∏–º—É–ª–∏—Ä–æ–≤–∞–Ω–∏—è —Ç–æ–≤–∞—Ä–æ–æ–±–æ—Ä–æ—Ç–∞.",
                c2T: "–¢–æ–≤–∞—Ä—ã –∏ –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏", c2D: "–¢—Ä–∞–Ω–∑–∏—Ç —à–µ–ª–∫–∞, —Ñ–∞—Ä—Ñ–æ—Ä–∞ –∏ –ø—Ä—è–Ω–æ—Å—Ç–µ–π —Å–æ—á–µ—Ç–∞–ª—Å—è —Å —ç–∫—Å–ø–æ—Ä—Ç–æ–º —Å—Ç–µ–ø–Ω–æ–≥–æ —Å–µ—Ä–µ–±—Ä–∞ –∏ –ª–æ—à–∞–¥–µ–π. –ü—É—Ç—å —Å—Ç–∞–ª –æ—Å–Ω–æ–≤–æ–π –≥–ª–æ–±–∞–ª—å–Ω–æ–π —ç–∫–æ–Ω–æ–º–∏–∫–∏ —Ç–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏.",
                c3T: "–î–∏–∞–ª–æ–≥ –ö—É–ª—å—Ç—É—Ä", c3D: "–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –ø—É—Ç–µ–π –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–ª–∞ —Ä–∞—Å—Ü–≤–µ—Ç —Ä–µ–ª–∏–≥–∏–π –∏ –∏—Å–∫—É—Å—Å—Ç–≤. –¢—é—Ä–∫—Å–∫–∏–µ –∫–∞–≥–∞–Ω—ã –≤—ã—Å—Ç—É–ø–∞–ª–∏ –≥–∞—Ä–∞–Ω—Ç–∞–º–∏ —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏ –Ω–∞ –æ–≥—Ä–æ–º–Ω—ã—Ö –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–∞—Ö –°—Ç–µ–ø–∏.",
                scienceT: "–ò–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω—ã–π —Ç—Ä–∞–Ω–∑–∏—Ç", scienceD: "–®–µ–ª–∫–æ–≤—ã–π –ø—É—Ç—å –ø—Ä–∏–Ω–µ—Å –Ω–µ —Ç–æ–ª—å–∫–æ –∑–æ–ª–æ—Ç–æ, –Ω–æ –∏ –∏–¥–µ–∏. –û—Ç—Ä–∞—Ä —Å—Ç–∞–ª —Ü–µ–Ω—Ç—Ä–æ–º –Ω–∞—É–∫–∏, –≥–¥–µ —Å—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–ª–æ—Å—å –º–∏—Ä–æ–≤–æ–∑–∑—Ä–µ–Ω–∏–µ –ê–ª—å-–§–∞—Ä–∞–±–∏.",
                footer: "¬´–í–µ–ª–∏–∫–∏–π –®–µ–ª–∫–æ–≤—ã–π –ø—É—Ç—å –ø—Ä–µ–≤—Ä–∞—Ç–∏–ª –ö–∞–∑–∞—Ö—Å—Ç–∞–Ω –≤ —Å–µ—Ä–¥—Ü–µ –º–∏—Ä–∞, –≥–¥–µ –Ω–∞ –ø–µ—Ä–µ–∫—Ä–µ—Å—Ç–∫–µ –¥–æ—Ä–æ–≥ –∫–æ–≤–∞–ª–∞—Å—å –≥–ª–æ–±–∞–ª—å–Ω–∞—è –∏—Å—Ç–æ—Ä–∏—è —á–µ–ª–æ–≤–µ—á–µ—Å—Ç–≤–∞.¬ª",
                routes: {
                    south: { name: "–Æ–∂–Ω–∞—è –≤–µ—Ç–≤—å (–ì–ª–∞–≤–Ω–∞—è)", text: "–ü—Ä–æ–ª–µ–≥–∞–ª–∞ —á–µ—Ä–µ–∑ –¢–∞—Ä–∞–∑, –û—Ç—Ä–∞—Ä, –¢—É—Ä–∫–µ—Å—Ç–∞–Ω –≤ –°—Ä–µ–¥–Ω—é—é –ê–∑–∏—é. –°–∞–º—ã–π –æ–∂–∏–≤–ª–µ–Ω–Ω—ã–π –º–∞—Ä—à—Ä—É—Ç, –±–æ–≥–∞—Ç—ã–π –≥–æ—Ä–æ–¥–∞–º–∏ –∏ –∫–∞—Ä–∞–≤–∞–Ω-—Å–∞—Ä–∞—è–º–∏." },
                    central: { name: "–¶–µ–Ω—Ç—Ä–∞–ª—å–Ω–∞—è –≤–µ—Ç–≤—å", text: "–®–ª–∞ –∏–∑ –û—Ç—Ä–∞—Ä–∞ —á–µ—Ä–µ–∑ –°–∞—Ä—ã—Å—É –≤ –¶–µ–Ω—Ç—Ä–∞–ª—å–Ω—ã–π –ö–∞–∑–∞—Ö—Å—Ç–∞–Ω (–£–ª—ã—Ç–∞—É). –ü—É—Ç—å –¥–ª—è —Ç—Ä–∞–Ω–∑–∏—Ç–∞ –º–µ—Ç–∞–ª–ª–æ–≤ (–º–µ–¥—å, —Å–µ—Ä–µ–±—Ä–æ) –∏ –ø—É—à–Ω–∏–Ω—ã." },
                    north: { name: "–°–µ–≤–µ—Ä–Ω–∞—è –≤–µ—Ç–≤—å", text: "–û–≥–∏–±–∞–ª–∞ –ö–∞—Å–ø–∏–π –∏ —à–ª–∞ —á–µ—Ä–µ–∑ –ü—Ä–∏—É—Ä–∞–ª—å–µ. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∞—Å—å –¥–ª—è —Å–≤—è–∑–µ–π —Å –†—É—Å—å—é –∏ –í–∏–∑–∞–Ω—Ç–∏–µ–π, —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–ª–∞—Å—å –Ω–∞ —Ç—Ä–∞–Ω–∑–∏—Ç–µ –º–µ—Ö–∞ –∏ –∫–æ–Ω–µ–π." }
                }
            },
            kz: {
                title: "“ö–∞–∑–∞“õ—Å—Ç–∞–Ω –∞—É–º–∞“ì—ã–Ω–¥–∞“ì—ã “∞–ª—ã –ñ—ñ–±–µ–∫ –∂–æ–ª—ã",
                vizTitle: "–¢—Ä–∞–Ω–∑–∏—Ç –ö–∞—Ä—Ç–∞—Å—ã",
                vizDesc: "“ö–∞–∑–∞“õ—Å—Ç–∞–Ω –∂–æ–ª–¥—ã“£ –Ω–µ–≥—ñ–∑–≥—ñ –±”©–ª—ñ–≥—ñ –±–æ–ª–¥—ã. –¢–∞–ª–¥–∞—É –∂–∞—Å–∞—É “Ø—à—ñ–Ω —Å—ã–∑–±–∞–¥–∞“ì—ã –Ω–µ–≥—ñ–∑–≥—ñ —Ç–∞—Ä–º–∞“õ—Ç–∞—Ä–¥—ã (–û“£—Ç“Ø—Å—Ç—ñ–∫, –û—Ä—Ç–∞–ª—ã“õ, –°–æ–ª—Ç“Ø—Å—Ç—ñ–∫) –±–∞—Å—ã“£—ã–∑.",
                badge: "–°–∞—É–¥–∞ –±–∞“ì—ã—Ç—Ç–∞—Ä—ã–Ω —Ç–∞–ª–¥–∞—É",
                routeTitleDefault: "–ñ–æ–ª–¥–∞—Ä–¥—ã –∑–µ—Ä—Ç—Ç–µ—É",
                routeDescDefault: "–ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤—Ç—ñ –∫–∞—Ä—Ç–∞–¥–∞–Ω “Ø—à –º–∞—Ä—à—Ä—É—Ç –∂–µ–ª—ñ—Å—ñ–Ω—ñ“£ –±—ñ—Ä—ñ–Ω —Ç–∞“£–¥–∞“£—ã–∑.",
                planTitle: "–≠–∫–æ–Ω–æ–º–∏–∫–∞ –∂”ô–Ω–µ –ú”ô–¥–µ–Ω–∏–µ—Ç",
                tag1: "–¢–æ—Ä–∞–ø—Ç—ã “õ–∞–ª–∞–ª–∞—Ä", tag2: "–ê–ª–º–∞—Å—É", tag3: "–î–∏–ø–ª–æ–º–∞—Ç–∏—è",
                c1T: "”®—Ä–∫–µ–Ω–¥–µ—É –æ—Ä—Ç–∞–ª—ã“õ—Ç–∞—Ä—ã", c1D: "–¢–∞—Ä–∞–∑, –û—Ç—ã—Ä–∞—Ä –∂”ô–Ω–µ –ò—Å–ø–∏–¥–∂–∞–± –µ“£ –±–∞–π “õ–∞–ª–∞–ª–∞—Ä“ì–∞ –∞–π–Ω–∞–ª–¥—ã. –ú“±–Ω–¥–∞ –∫–µ—Ä—É–µ–Ω —Å–∞—Ä–∞–π–ª–∞—Ä—ã –∂“±–º—ã—Å —ñ—Å—Ç–µ–¥—ñ, –∞–ª –∫”©–ø–µ—Å—Ç–µ—Ä–≥–µ —Å–∞—É–¥–∞–Ω—ã —ã–Ω—Ç–∞–ª–∞–Ω–¥—ã—Ä—É “Ø—à—ñ–Ω –∂–µ“£—ñ–ª–¥—ñ–∫—Ç–µ—Ä –∂–∞—Å–∞–ª–¥—ã.",
                c2T: "–¢–∞—É–∞—Ä–ª–∞—Ä –º–µ–Ω –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—è–ª–∞—Ä", c2D: "–ñ—ñ–±–µ–∫, —Ñ–∞—Ä—Ñ–æ—Ä –∂”ô–Ω–µ –¥”ô–º–¥–µ—É—ñ—à—Ç–µ—Ä —Ç—Ä–∞–Ω–∑–∏—Ç—ñ –¥–∞–ª–∞ –∫“Ø–º—ñ—Å—ñ –º–µ–Ω –∂—ã–ª“õ—ã —ç–∫—Å–ø–æ—Ä—Ç—ã–º–µ–Ω “±—à—Ç–∞—Å—Ç—ã. –ñ–æ–ª —Å–æ–ª –∑–∞–º–∞–Ω“ì—ã –∂–∞“ª–∞–Ω–¥—ã“õ —ç–∫–æ–Ω–æ–º–∏–∫–∞–Ω—ã“£ –Ω–µ–≥—ñ–∑—ñ –±–æ–ª–¥—ã.",
                c3T: "–ú”ô–¥–µ–Ω–∏–µ—Ç—Ç–µ—Ä –¥–∏–∞–ª–æ–≥—ã", c3D: "–ñ–æ–ª–¥–∞—Ä–¥—ã“£ “õ–∞—É—ñ–ø—Å—ñ–∑–¥—ñ–≥—ñ –¥—ñ–Ω–¥–µ—Ä –º–µ–Ω ”©–Ω–µ—Ä–¥—ñ“£ –≥“Ø–ª–¥–µ–Ω—É—ñ–Ω–µ –∫–µ–ø—ñ–ª –±–æ–ª–¥—ã. –¢“Ø—Ä–∫—ñ “õ–∞“ì–∞–Ω–¥–∞—Ä—ã –î–∞–ª–∞–Ω—ã“£ –∫–µ“£ –∫–µ“£—ñ—Å—Ç—ñ–≥—ñ–Ω–¥–µ–≥—ñ —Ç“±—Ä–∞“õ—Ç—ã–ª—ã“õ—Ç—ã“£ –∫–µ–ø—ñ–ª—ñ —Ä–µ—Ç—ñ–Ω–¥–µ —Ç–∞–Ω—ã–ª–¥—ã.",
                scienceT: "–ó–µ—Ä–¥–µ —Ç—Ä–∞–Ω–∑–∏—Ç—ñ", scienceD: "–ñ—ñ–±–µ–∫ –∂–æ–ª—ã —Ç–µ–∫ –∞–ª—Ç—ã–Ω “ì–∞–Ω–∞ –µ–º–µ—Å, –∏–¥–µ—è–ª–∞—Ä–¥—ã –¥–∞ ”ô–∫–µ–ª–¥—ñ. –û—Ç—ã—Ä–∞—Ä “ì—ã–ª—ã–º –æ—Ä—Ç–∞–ª—ã“ì—ã–Ω–∞ –∞–π–Ω–∞–ª—ã–ø, ”ô–ª-–§–∞—Ä–∞–±–∏–¥—ñ“£ –¥“Ø–Ω–∏–µ—Ç–∞–Ω—ã–º—ã –æ—Å—ã–Ω–¥–∞ “õ–∞–ª—ã–ø—Ç–∞—Å—Ç—ã.",
                footer: "¬´“∞–ª—ã –ñ—ñ–±–µ–∫ –∂–æ–ª—ã “ö–∞–∑–∞“õ—Å—Ç–∞–Ω–¥—ã ”ô–ª–µ–º–Ω—ñ“£ –∂“Ø—Ä–µ–≥—ñ–Ω–µ –∞–π–Ω–∞–ª–¥—ã—Ä–¥—ã, –æ–Ω–¥–∞ –∂–æ–ª–¥–∞—Ä–¥—ã“£ —Ç“Ø–π—ñ—Å–∫–µ–Ω –∂–µ—Ä—ñ–Ω–¥–µ –∞–¥–∞–º–∑–∞—Ç—Ç—ã“£ –∂–∞“ª–∞–Ω–¥—ã“õ —Ç–∞—Ä–∏—Ö—ã —à—ã“£–¥–∞–ª–¥—ã.¬ª",
                routes: {
                    south: { name: "–û“£—Ç“Ø—Å—Ç—ñ–∫ —Ç–∞—Ä–º–∞“õ (–ù–µ–≥—ñ–∑–≥—ñ)", text: "–¢–∞—Ä–∞–∑, –û—Ç—ã—Ä–∞—Ä, –¢“Ø—Ä–∫—ñ—Å—Ç–∞–Ω –∞—Ä“õ—ã–ª—ã –û—Ä—Ç–∞ –ê–∑–∏—è“ì–∞ ”©—Ç—Ç—ñ. “ö–∞–ª–∞–ª–∞—Ä –º–µ–Ω –∫–µ—Ä—É–µ–Ω —Å–∞—Ä–∞–π–ª–∞—Ä“ì–∞ –±–∞–π –µ“£ “õ–∞—Ä–±–∞–ª–∞—Å –±–∞“ì—ã—Ç." },
                    central: { name: "–û—Ä—Ç–∞–ª—ã“õ —Ç–∞—Ä–º–∞“õ", text: "–û—Ç—ã—Ä–∞—Ä–¥–∞–Ω –°–∞—Ä—ã—Å—É –∞—Ä“õ—ã–ª—ã –û—Ä—Ç–∞–ª—ã“õ “ö–∞–∑–∞“õ—Å—Ç–∞–Ω“ì–∞ (“∞–ª—ã—Ç–∞—É) –±–µ—Ç –∞–ª–¥—ã. –ú–µ—Ç–∞–ª–¥–∞—Ä (–º—ã—Å, –∫“Ø–º—ñ—Å) –º–µ–Ω –∞“£ —Ç–µ—Ä—ñ—Å—ñ–Ω —Ç–∞—Å—ã–º–∞–ª–¥–∞—É“ì–∞ –∞—Ä–Ω–∞–ª“ì–∞–Ω." },
                    north: { name: "–°–æ–ª—Ç“Ø—Å—Ç—ñ–∫ —Ç–∞—Ä–º–∞“õ", text: "–ö–∞—Å–ø–∏–π–¥—ñ –∞–π–Ω–∞–ª—ã–ø ”©—Ç—ñ–ø, –ñ–∞–π—ã“õ –±–æ–π—ã–º–µ–Ω –∂“Ø—Ä–¥—ñ. –†—É—Å—å –∂”ô–Ω–µ –í–∏–∑–∞–Ω—Ç–∏—è–º–µ–Ω –±–∞–π–ª–∞–Ω—ã—Å “Ø—à—ñ–Ω –ø–∞–π–¥–∞–ª–∞–Ω—ã–ª–¥—ã, –∞“£ —Ç–µ—Ä—ñ—Å—ñ –º–µ–Ω –∂—ã–ª“õ—ã —Å–∞—É–¥–∞—Å—ã–Ω–∞ –º–∞–º–∞–Ω–¥–∞–Ω–¥—ã." }
                }
            },
            en: {
                title: "The Great Silk Road in Kazakhstan",
                vizTitle: "Transit Map",
                vizDesc: "Kazakhstan was a vital segment of the Silk Road. Click on the main branches (Southern, Central, Northern) on the diagram for analysis.",
                badge: "Trade Routes Analysis",
                routeTitleDefault: "Explore Routes",
                routeDescDefault: "Select one of the three route lines on the interactive map.",
                planTitle: "Economy and Culture",
                tag1: "City Nodes", tag2: "Exchange", tag3: "Diplomacy",
                c1T: "Prosperity Centers", c1D: "Taraz, Otrar, and Ispidjab became the wealthiest cities. Caravanserais operated here, and merchants enjoyed tax exemptions to boost trade.",
                c2T: "Goods and Tech", c2D: "Silk, porcelain, and spice transit merged with the export of steppe silver and horses. The road was the backbone of the era's global economy.",
                c3T: "Dialogue of Cultures", c3D: "Route security ensured the bloom of religions and arts. Turkic Khagans acted as guarantors of stability across the Steppe.",
                scienceT: "Intellectual Transit", scienceD: "The Silk Road brought ideas along with gold. Otrar became a scientific hub where Al-Farabi's worldview was shaped.",
                footer: "¬´The Great Silk Road turned Kazakhstan into the heart of the world, where global human history was forged at the crossroads.¬ª",
                routes: {
                    south: { name: "Southern Branch (Main)", text: "Ran through Taraz, Otrar, and Turkestan to Central Asia. The most active route, rich in cities and infrastructure." },
                    central: { name: "Central Branch", text: "Led from Otrar through Sarysu to Central Kazakhstan (Ulytau). Used for metal (copper, silver) and fur transit." },
                    north: { name: "Northern Branch", text: "Circled the Caspian and went through the Ural region. Vital for ties with Rus and Byzantium, specialized in furs and horses." }
                }
            }
        };

        let currentLang = 'ru';
        const canvas = document.getElementById('routeCanvas');
        const ctx = canvas.getContext('2d');

        function resizeCanvas() {
            const container = canvas.parentElement;
            canvas.width = container.clientWidth;
            canvas.height = 500;
            drawRoutes();
        }

        function drawRoutes() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            const cx = canvas.width / 2;
            const cy = canvas.height / 2;
            const scale = canvas.width / 800;

            // 1. Draw Stylized Map Outline (Abstract)
            ctx.beginPath();
            ctx.moveTo(100 * scale, 350 * scale);
            ctx.quadraticCurveTo(cx, 100, 700 * scale, 150 * scale);
            ctx.strokeStyle = 'rgba(217, 119, 6, 0.05)';
            ctx.lineWidth = 100 * scale;
            ctx.stroke();

            // 2. SOUTH ROUTE (Reddish)
            ctx.beginPath();
            ctx.moveTo(100 * scale, 450 * scale);
            ctx.bezierCurveTo(300 * scale, 400 * scale, 500 * scale, 450 * scale, 750 * scale, 400 * scale);
            ctx.strokeStyle = '#991b1b';
            ctx.lineWidth = 8 * scale;
            ctx.stroke();
            
            // 3. CENTRAL ROUTE (Gold)
            ctx.beginPath();
            ctx.moveTo(350 * scale, 410 * scale);
            ctx.quadraticCurveTo(450 * scale, 300 * scale, 550 * scale, 100 * scale);
            ctx.strokeStyle = '#d97706';
            ctx.lineWidth = 6 * scale;
            ctx.stroke();

            // 4. NORTHERN ROUTE (Green)
            ctx.beginPath();
            ctx.moveTo(150 * scale, 430 * scale);
            ctx.bezierCurveTo(200 * scale, 250 * scale, 400 * scale, 100 * scale, 650 * scale, 50 * scale);
            ctx.strokeStyle = '#166534';
            ctx.lineWidth = 6 * scale;
            ctx.stroke();

            // 5. City Nodes
            drawNode(350 * scale, 410 * scale, '#991b1b', "OTRAR");
            drawNode(450 * scale, 430 * scale, '#991b1b', "TARAZ");
            drawNode(480 * scale, 250 * scale, '#d97706', "ULYTAU");
            drawNode(200 * scale, 250 * scale, '#166534', "URALS");

            // Interactive instruction
            ctx.fillStyle = 'rgba(69, 26, 3, 0.2)';
            ctx.font = 'bold 10px Inter';
            ctx.textAlign = 'center';
            ctx.fillText("TAP ON COLORFUL PATHS TO ANALYZE BRANCHES", cx, 40 * scale);
        }

        function drawNode(x, y, color, label) {
            ctx.beginPath();
            ctx.arc(x, y, 6, 0, Math.PI * 2);
            ctx.fillStyle = color;
            ctx.fill();
            ctx.strokeStyle = '#fff';
            ctx.lineWidth = 2;
            ctx.stroke();
            
            ctx.fillStyle = '#451a03';
            ctx.font = 'bold 9px Montserrat';
            ctx.textAlign = 'center';
            ctx.fillText(label, x, y + 18);
        }

        canvas.addEventListener('click', (e) => {
            const rect = canvas.getBoundingClientRect();
            const x = e.clientX - rect.left;
            const y = e.clientY - rect.top;
            const scale = canvas.width / 800;

            let target = null;
            // Detection areas based on y positions mainly
            if (y > 380 * scale) target = 'south';
            else if (x > 380 * scale && y < 350 * scale && x < 600 * scale) target = 'central';
            else if (y < 250 * scale) target = 'north';

            if (target) {
                const info = translations[currentLang].routes[target];
                document.getElementById('route-title').innerText = info.name;
                document.getElementById('route-desc').innerText = info.text;
                document.getElementById('info-panel').style.borderColor = (target === 'south' ? '#991b1b' : (target === 'central' ? '#d97706' : '#166534'));
            }
        });

        function setLang(lang) {
            currentLang = lang;
            const t = translations[lang];
            document.getElementById('main-title').innerText = t.title;
            document.getElementById('viz-title').innerText = t.vizTitle;
            document.getElementById('viz-desc').innerText = t.vizDesc;
            document.getElementById('badge').innerText = t.badge;
            document.getElementById('route-title').innerText = t.routeTitleDefault;
            document.getElementById('route-desc').innerText = t.routeDescDefault;
            document.getElementById('plan-title').innerText = t.planTitle;
            
            document.getElementById('c1-t').innerText = t.c1T; document.getElementById('c1-d').innerText = t.c1D;
            document.getElementById('c2-t').innerText = t.c2T; document.getElementById('c2-d').innerText = t.c2D;
            document.getElementById('c3-t').innerText = t.c3T; document.getElementById('c3-d').innerText = t.c3D;
            
            document.getElementById('tag-1').innerText = t.tag1;
            document.getElementById('tag-2').innerText = t.tag2;
            document.getElementById('tag-3').innerText = t.tag3;

            document.getElementById('science-t').innerText = t.scienceT;
            document.getElementById('science-d').innerText = t.scienceD;
            document.getElementById('footer-text').innerText = t.footer;

            ['ru', 'kz', 'en'].forEach(l => {
                const btn = document.getElementById(`btn-${l}`);
                btn.className = l === lang ? "px-6 py-2 rounded-lg text-sm font-black lang-active" : "px-6 py-2 rounded-lg text-sm font-bold text-amber-700 hover:bg-white transition-all";
            });
            resizeCanvas();
        }

        window.onload = () => { resizeCanvas(); setLang('ru'); };
        window.onresize = resizeCanvas;
    </script>

<script type="text/javascript" src="qrc:///qtwebchannel/qwebchannel.js"></script>







<style data-oi-map-overlay>
.oi-map-btn{
  position:fixed; right:16px; bottom:16px; z-index:9999;
  padding:10px 14px; border-radius:999px; border:1px solid rgba(0,0,0,.15);
  background:#fff; cursor:pointer; font:600 14px/1.1 system-ui,-apple-system,Segoe UI,Roboto,Arial;
  box-shadow:0 8px 20px rgba(0,0,0,.12);
}
.oi-map-backdrop{
  position:fixed; inset:0; background:rgba(0,0,0,.72); z-index:10000;
  display:none; align-items:center; justify-content:center; padding:18px;
}
.oi-map-backdrop[aria-hidden="false"]{ display:flex; }
.oi-map-modal{
  width:min(1100px, 100%); height:min(85vh, 900px);
  background:#111; border-radius:14px; overflow:hidden; position:relative;
  box-shadow:0 20px 60px rgba(0,0,0,.35);
}
.oi-map-close{
  position:absolute; top:10px; right:10px; z-index:3;
  width:40px; height:40px; border-radius:999px; border:1px solid rgba(255,255,255,.25);
  background:rgba(0,0,0,.35); color:#fff; cursor:pointer; font-size:22px;
}
.oi-map-viewport{
  width:100%; height:100%; overflow:auto; -webkit-overflow-scrolling:touch;
  touch-action: pan-x pan-y;
  background:#000;
  padding-top:56px; /* –º–µ—Å—Ç–æ –ø–æ–¥ —Ç—É–ª–±–∞—Ä */
}
.oi-map-img{
  display:block;
  transform-origin: 0 0;
  user-select:none; -webkit-user-drag:none;
}
.oi-map-toolbar{
  position:absolute; left:12px; top:12px; right:12px; z-index:2;
  display:flex; align-items:center; justify-content:space-between; gap:10px;
  pointer-events:none;
}
.oi-map-tabs{ display:flex; gap:8px; pointer-events:auto; }
.oi-map-tab{
  width:36px; height:34px; border-radius:10px;
  border:1px solid rgba(255,255,255,.22);
  background:rgba(0,0,0,.35); color:#fff;
  cursor:pointer; font:600 14px system-ui,-apple-system,Segoe UI,Roboto,Arial;
}
.oi-map-tab.is-active{
  background:rgba(255,255,255,.12);
  border-color: rgba(255,255,255,.45);
}
.oi-map-hint{
  pointer-events:none;
  color:#fff; opacity:.85; font:12px/1.2 system-ui,-apple-system,Segoe UI,Roboto,Arial;
  background:rgba(0,0,0,.35); border:1px solid rgba(255,255,255,.18);
  padding:8px 10px; border-radius:10px;
}
</style>

<button class="oi-map-btn" type="button" data-oi-map-btn>üó∫Ô∏è –ö–∞—Ä—Ç–∞</button>

<div class="oi-map-backdrop" aria-hidden="true" data-oi-map-backdrop>
  <div class="oi-map-modal" role="dialog" aria-modal="true" aria-label="–ö–∞—Ä—Ç–∞">
    <button class="oi-map-close" type="button" aria-label="–ó–∞–∫—Ä—ã—Ç—å" data-oi-map-close>√ó</button>

    <div class="oi-map-toolbar">
      <div class="oi-map-tabs">
        <button type="button" class="oi-map-tab is-active" data-oi-map-tab="1">1</button>
        <button type="button" class="oi-map-tab" data-oi-map-tab="2">2</button>
        <button type="button" class="oi-map-tab" data-oi-map-tab="3">3</button>
        <button type="button" class="oi-map-tab" data-oi-map-tab="4">4</button>
      </div>
      <div class="oi-map-hint">–ö–æ–ª—ë—Å–∏–∫–æ/—Ç—Ä–µ–∫–ø–∞–¥ ‚Äî –∑—É–º ‚Ä¢ Esc ‚Äî –∑–∞–∫—Ä—ã—Ç—å</div>
    </div>

    <div class="oi-map-viewport" data-oi-map-viewport>
      <img class="oi-map-img" data-oi-map-img data-map="1" src="../../assets/maps/karta_1.png" alt="–ö–∞—Ä—Ç–∞ 1" style="display:block;">
<img class="oi-map-img" data-oi-map-img data-map="2" src="../../assets/maps/karta_2.png" alt="–ö–∞—Ä—Ç–∞ 2" style="display:none;">
<img class="oi-map-img" data-oi-map-img data-map="3" src="../../assets/maps/karta_3.png" alt="–ö–∞—Ä—Ç–∞ 3" style="display:none;">
<img class="oi-map-img" data-oi-map-img data-map="4" src="../../assets/maps/karta_4.png" alt="–ö–∞—Ä—Ç–∞ 4" style="display:none;">
    </div>
  </div>
</div>


<script data-oi-map-overlay>
(function(){
  const btn = document.querySelector('[data-oi-map-btn]');
  const backdrop = document.querySelector('[data-oi-map-backdrop]');
  const closeBtn = document.querySelector('[data-oi-map-close]');
  const viewport = document.querySelector('[data-oi-map-viewport]');
  const tabs = Array.from(document.querySelectorAll('[data-oi-map-tab]'));
  const imgs = Array.from(document.querySelectorAll('[data-oi-map-img][data-map]'));
  if(!btn || !backdrop || !closeBtn || !viewport || imgs.length === 0) return;

  let scale = 1;

  function applyScale(){
    imgs.forEach(img => { img.style.transform = `scale(${scale})`; });
  }
  function openMap(){
    backdrop.setAttribute('aria-hidden','false');
    document.body.style.overflow = 'hidden';
  }
  function closeMap(){
    backdrop.setAttribute('aria-hidden','true');
    document.body.style.overflow = '';
  }
  function showMap(n){
    imgs.forEach(img => {
      img.style.display = (img.getAttribute('data-map') === String(n)) ? 'block' : 'none';
    });
    tabs.forEach(t => t.classList.toggle('is-active', t.getAttribute('data-oi-map-tab') === String(n)));
    viewport.scrollTop = 0;
    viewport.scrollLeft = 0;
  }

  btn.addEventListener('click', openMap);
  closeBtn.addEventListener('click', closeMap);
  backdrop.addEventListener('click', (e)=>{ if(e.target === backdrop) closeMap(); });
  window.addEventListener('keydown', (e)=>{ if(e.key === 'Escape') closeMap(); });

  tabs.forEach(t => t.addEventListener('click', () => showMap(t.getAttribute('data-oi-map-tab'))));

  viewport.addEventListener('wheel', (e)=>{
    if(backdrop.getAttribute('aria-hidden') !== 'false') return;
    e.preventDefault();
    const delta = -Math.sign(e.deltaY) * 0.1;
    scale = Math.min(4, Math.max(0.6, scale + delta));
    applyScale();
  }, {passive:false});

  applyScale();
  showMap(1);
})();
</script>
</body>
</html>