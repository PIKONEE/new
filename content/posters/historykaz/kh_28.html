<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–î—Ä–µ–≤–Ω–µ–µ –∏—Å–∫—É—Å—Å—Ç–≤–æ –∏ –≤–µ—Ä–æ–≤–∞–Ω–∏—è –∫–æ—á–µ–≤–Ω–∏–∫–æ–≤</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@700;900&family=Inter:wght@300;400;600&display=swap&subset=cyrillic,cyrillic-ext" rel="stylesheet">
    <style>
        body { font-family: 'Inter', sans-serif; background-color: #020617; color: #f1f5f9; }
        h1, h2, h3 { font-family: 'Montserrat', sans-serif; }

        .cosmic-gradient {
            background: radial-gradient(circle at top, #1e1b4b 0%, #020617 80%);
        }

        .gold-panel {
            background: rgba(30, 41, 59, 0.5);
            backdrop-filter: blur(15px);
            border: 1px solid rgba(234, 179, 8, 0.2);
            border-radius: 2.5rem;
            transition: all 0.4s ease;
        }

        .gold-panel:hover {
            border-color: #eab308;
            box-shadow: 0 0 40px rgba(234, 179, 8, 0.1);
        }

        .lang-active {
            background-color: #eab308;
            color: #020617;
            box-shadow: 0 0 20px rgba(234, 179, 8, 0.4);
        }

        canvas {
            cursor: pointer;
            background: rgba(15, 23, 42, 0.3);
            border-radius: 2rem;
        }

        .world-node {
            transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .meaning-card {
            border-left: 4px solid #eab308;
            background: rgba(251, 191, 36, 0.05);
        }

        @keyframes pulse-gold {
            0%, 100% { opacity: 0.5; }
            50% { opacity: 1; }
        }
        .glow-point { animation: pulse-gold 3s infinite; }
    </style>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
</head>
<body class="cosmic-gradient min-h-screen pb-20">

<!-- –ö–ù–û–ü–ö–ê –ù–ê–ó–ê–î -->
<div style="position: fixed; top: 20px; left: 20px; z-index: 10000;">
    <button onclick="goBack()" style="
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        border: none;
        color: white;
        padding: 12px 24px;
        border-radius: 10px;
        font-size: 16px;
        font-weight: 600;
        cursor: pointer;
        box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);
        transition: all 0.3s ease;
        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;
    " onmouseover="this.style.transform='translateX(-5px)'; this.style.boxShadow='0 6px 20px rgba(102, 126, 234, 0.6)';" 
       onmouseout="this.style.transform='translateX(0)'; this.style.boxShadow='0 4px 15px rgba(102, 126, 234, 0.4)';">
        ‚Üê –ù–∞–∑–∞–¥
    </button>
</div>


    <!-- Header (No emoji, strict typography) -->
    <header class="sticky top-0 z-50 bg-black/60 backdrop-blur-xl border-b border-amber-900/20 px-6 py-5">
        <div class="max-w-7xl mx-auto flex flex-col md:flex-row justify-between items-center gap-6">
            <h1 id="main-title" class="text-xl md:text-2xl font-black uppercase tracking-[0.25em] text-amber-500">–î—Ä–µ–≤–Ω–µ–µ –∏—Å–∫—É—Å—Å—Ç–≤–æ –∏ –≤–µ—Ä–æ–≤–∞–Ω–∏—è –∫–æ—á–µ–≤–Ω–∏–∫–æ–≤</h1>
            <div class="flex bg-slate-900 p-1 rounded-xl border border-amber-900/30">
                <button onclick="setLang('ru')" id="btn-ru" class="px-6 py-2 rounded-lg text-sm font-bold transition-all">RU</button>
                <button onclick="setLang('kz')" id="btn-kz" class="px-6 py-2 rounded-lg text-sm font-bold transition-all">KZ</button>
                <button onclick="setLang('en')" id="btn-en" class="px-6 py-2 rounded-lg text-sm font-bold transition-all">EN</button>
            </div>
        </div>
    </header>

    <main class="max-w-7xl mx-auto px-6 py-12 space-y-16">
        
        <!-- Section 1: Interactive Nomadic Cosmology (The Map) -->
        <div class="gold-panel p-8 md:p-12">
            <div class="grid grid-cols-1 lg:grid-cols-12 gap-12 items-center">
                <div class="lg:col-span-5 space-y-8">
                    <div id="badge" class="inline-block bg-amber-500/20 text-amber-500 border border-amber-500/30 px-4 py-1 rounded-full text-[10px] font-black uppercase tracking-widest text-nowrap">Sacred Universe Model</div>
                    <h2 id="viz-title" class="text-3xl md:text-4xl font-black text-white leading-tight uppercase italic">–ú–∏—Ä–æ–≤–æ–µ –î—Ä–µ–≤–æ –°—Ç–µ–ø–∏</h2>
                    <p id="viz-desc" class="text-lg text-slate-400 font-light leading-relaxed">
                        –ö–æ—á–µ–≤–Ω–∏–∫–∏ –≤–∏–¥–µ–ª–∏ –º–∏—Ä –∫–∞–∫ —Ç—Ä–µ—Ö—á–∞—Å—Ç–Ω—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É. –ù–∞–∂–º–∏—Ç–µ –Ω–∞ —É—Ä–æ–≤–Ω–∏ –î—Ä–µ–≤–∞ —Å–ø—Ä–∞–≤–∞, —á—Ç–æ–±—ã —Ä–∞—Å–∫—Ä—ã—Ç—å —Ñ–∏–ª–æ—Å–æ—Ñ–∏—é –¥—Ä–µ–≤–Ω–µ–≥–æ –º–∏—Ä–æ–≤–æ–∑–∑—Ä–µ–Ω–∏—è.
                    </p>
                    
                    <div id="info-panel" class="p-8 rounded-[2rem] bg-slate-900/50 border-l-8 border-amber-500 shadow-2xl transition-all duration-500">
                        <h3 id="element-title" class="text-xl font-bold text-amber-400 mb-3 uppercase tracking-tighter">–ò—Å—Å–ª–µ–¥—É–π—Ç–µ –í—Å–µ–ª–µ–Ω–Ω—É—é</h3>
                        <p id="element-desc" class="text-slate-300 text-sm leading-relaxed italic">–ö–ª–∏–∫–Ω–∏—Ç–µ –Ω–∞ –∫—Ä–æ–Ω—É, —Å—Ç–≤–æ–ª –∏–ª–∏ –∫–æ—Ä–Ω–∏ –¥–µ—Ä–µ–≤–∞ –Ω–∞ —Ö–æ–ª—Å—Ç–µ.</p>
                    </div>
                </div>
                
                <div class="lg:col-span-7 p-4 flex items-center justify-center relative min-h-[500px]">
                    <canvas id="cosmoCanvas"></canvas>
                    <div class="absolute top-8 left-10 text-[10px] text-amber-900 font-mono uppercase tracking-[0.3em]">Cosmological Reconstruction</div>
                </div>
            </div>
        </div>

        <!-- Section 2: Detailed Artistic Content (The Plan) -->
        <div class="space-y-12">
            <h2 id="plan-title" class="text-center text-3xl font-black text-white uppercase tracking-[0.4em] text-amber-500">–Ø–∑—ã–∫ –ó–≤–µ—Ä–∏–Ω–æ–≥–æ –°—Ç–∏–ª—è</h2>
            
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                
                <!-- Animal Style Evolution -->
                <div class="gold-panel p-10 flex flex-col justify-between border-t-8 border-amber-500">
                    <div>
                        <div class="text-5xl mb-6">üêÜ</div>
                        <h3 id="c1-t" class="text-xl font-bold mb-4 uppercase text-white">–ö–æ–¥ –ó–≤–µ—Ä–∏–Ω–æ–≥–æ –°—Ç–∏–ª—è</h3>
                        <p id="c1-d" class="text-slate-400 text-sm leading-relaxed mb-6">
                            –≠—Ç–æ –Ω–µ –ø—Ä–æ—Å—Ç–æ –¥–µ–∫–æ—Ä, –∞ –∑–Ω–∞–∫–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞. –•–∏—â–Ω–∏–∫–∏ (—Å–Ω–µ–∂–Ω—ã–π –±–∞—Ä—Å, –≤–æ–ª–∫) —Å–∏–º–≤–æ–ª–∏–∑–∏—Ä–æ–≤–∞–ª–∏ —Å–∏–ª—É –∏ –≤–ª–∞—Å—Ç—å, –∞ —Ç—Ä–∞–≤–æ—è–¥–Ω—ã–µ (–æ–ª–µ–Ω—å, –∞—Ä—Ö–∞—Ä) ‚Äî –∂–∏–∑–Ω–µ–Ω–Ω—É—é —ç–Ω–µ—Ä–≥–∏—é –∏ –¥—É—à—É. –°–æ—á–µ—Ç–∞–Ω–∏–µ —Ä–∞–∑–Ω—ã—Ö –∂–∏–≤–æ—Ç–Ω—ã—Ö –≤ –æ–¥–Ω–æ–º –ø—Ä–µ–¥–º–µ—Ç–µ –æ–ø–∏—Å—ã–≤–∞–ª–æ –º–∏—Ñ–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—é–∂–µ—Ç –±–æ—Ä—å–±—ã –∏–ª–∏ –≥–∞—Ä–º–æ–Ω–∏–∏ –º–∏—Ä–æ–≤.
                        </p>
                        <div class="p-4 bg-amber-500/10 rounded-2xl text-xs font-mono text-amber-200">
                            –ü–∏–∫ —Ä–∞–∑–≤–∏—Ç–∏—è: VII‚ÄìIII –≤–≤. –¥–æ –Ω.—ç.
                        </div>
                    </div>
                </div>

                <!-- Totemism & Shamanism -->
                <div class="gold-panel p-10 flex flex-col justify-between border-t-8 border-slate-600">
                    <div>
                        <div class="text-5xl mb-6">ü¶Ö</div>
                        <h3 id="c2-t" class="text-xl font-bold mb-4 uppercase text-white">–¢–æ—Ç–µ–º–∏–∑–º –∏ –ú–∞–≥–∏—è</h3>
                        <p id="c2-d" class="text-slate-400 text-sm leading-relaxed mb-6">
                            –ö–æ—á–µ–≤–Ω–∏–∫–∏ –≤–µ—Ä–∏–ª–∏ –≤ —Å–≤–µ—Ä—Ö—ä–µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω—É—é —Å–≤—è–∑—å —Ä–æ–¥–∞ —Å –∂–∏–≤–æ—Ç–Ω—ã–º-–ø—Ä–µ–¥–∫–æ–º (—Ç–æ—Ç–µ–º–æ–º). –í–æ–ª–∫ —Å—á–∏—Ç–∞–ª—Å—è –æ—Ç—Ü–æ–º-–∑–∞—â–∏—Ç–Ω–∏–∫–æ–º, –±–µ—Ä–∫—É—Ç ‚Äî –ø–æ—Å–ª–∞–Ω–Ω–∏–∫–æ–º –Ω–µ–±–∞. –†–∏—Ç—É–∞–ª—å–Ω—ã–µ –º–∞—Å–∫–∏ –∫–æ–Ω–µ–π —Å —Ä–æ–≥–∞–º–∏ –æ–ª–µ–Ω—è (–∫–∞–∫ –≤ –ë–µ—Ä–µ–ª–µ) –ø—Ä–µ–≤—Ä–∞—â–∞–ª–∏ –æ–±—ã—á–Ω–æ–µ –∂–∏–≤–æ—Ç–Ω–æ–µ –≤ –º–∏—Ñ–∏—á–µ—Å–∫–æ–µ —Å—É—â–µ—Å—Ç–≤–æ, —Å–ø–æ—Å–æ–±–Ω–æ–µ –¥–æ—Å—Ç–∞–≤–∏—Ç—å –¥—É—à—É —Ö–æ–∑—è–∏–Ω–∞ –∫ –±–æ–≥–∞–º.
                        </p>
                    </div>
                </div>

                <!-- Petroglyphs -->
                <div class="gold-panel p-10 flex flex-col justify-between border-t-8 border-amber-500">
                    <div>
                        <div class="text-5xl mb-6">‚òÄÔ∏è</div>
                        <h3 id="c3-t" class="text-xl font-bold mb-4 uppercase text-white">–ö–∞–º–µ–Ω–Ω–∞—è –ö–Ω–∏–≥–∞</h3>
                        <p id="c3-d" class="text-slate-400 text-sm leading-relaxed mb-6">
                            –ü–µ—Ç—Ä–æ–≥–ª–∏—Ñ—ã (–¢–∞–º–≥–∞–ª—ã, –ï—à–∫–∏–æ–ª—å–º–µ—Å) ‚Äî —ç—Ç–æ —Ö—Ä–∞–º—ã –ø–æ–¥ –æ—Ç–∫—Ä—ã—Ç—ã–º –Ω–µ–±–æ–º. –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è ¬´—Å–æ–ª–Ω—Ü–µ–≥–æ–ª–æ–≤—ã—Ö¬ª –±–æ–∂–µ—Å—Ç–≤ —Å–≤–∏–¥–µ—Ç–µ–ª—å—Å—Ç–≤—É—é—Ç –æ —Ä–∞–∑–≤–∏—Ç–æ–º —Å–æ–ª—è—Ä–Ω–æ–º –∫—É–ª—å—Ç–µ. –ö–æ—á–µ–≤–Ω–∏–∫–∏ –ø–æ–∫–ª–æ–Ω—è–ª–∏—Å—å –û–≥–Ω—é –∫–∞–∫ –æ—á–∏—â–∞—é—â–µ–π —Å–∏–ª–µ –∏ –°–æ–ª–Ω—Ü—É –∫–∞–∫ –∏—Å—Ç–æ—á–Ω–∏–∫—É –∂–∏–∑–Ω–∏, –æ—Ä–∏–µ–Ω—Ç–∏—Ä—É—è —Å–≤–æ–∏ –∫—É—Ä–≥–∞–Ω—ã —Å—Ç—Ä–æ–≥–æ –Ω–∞ –≤–æ—Å—Ç–æ–∫.
                        </p>
                    </div>
                </div>

            </div>

            <!-- Full Width Deep Info: Symbolism -->
            <div class="bg-amber-900/10 rounded-[4rem] p-10 md:p-16 border border-amber-500/20 shadow-2xl relative overflow-hidden">
                <div class="relative z-10 grid grid-cols-1 md:grid-cols-2 gap-12 items-center">
                    <div>
                        <h3 id="feat-title" class="text-3xl font-black text-white mb-8 uppercase italic tracking-widest">–°–µ–º–∞–Ω—Ç–∏–∫–∞ –û–ª–µ–Ω—è</h3>
                        <p id="feat-desc" class="text-slate-300 text-xl font-light leading-relaxed">
                            –û–ª–µ–Ω—å ‚Äî —Ü–µ–Ω—Ç—Ä–∞–ª—å–Ω—ã–π –æ–±—Ä–∞–∑ —Å–∞–∫—Å–∫–æ–≥–æ –∏—Å–∫—É—Å—Å—Ç–≤–∞. –ï–≥–æ –≤–µ—Ç–≤–∏—Å—Ç—ã–µ —Ä–æ–≥–∞, —á–∞—Å—Ç–æ –ø—Ä–µ–≤—Ä–∞—â–∞—é—â–∏–µ—Å—è –≤ –ø—Ç–∏—á—å–∏ –≥–æ–ª–æ–≤—ã, —Å–∏–º–≤–æ–ª–∏–∑–∏—Ä–æ–≤–∞–ª–∏ —Å–≤—è–∑—å –∑–µ–º–ª–∏ –∏ –Ω–µ–±–∞. –í –º–∏—Ñ–æ–ª–æ–≥–∏–∏ –æ–ª–µ–Ω—å –±—ã–ª –ø—Ä–æ–≤–æ–¥–Ω–∏–∫–æ–º –¥—É—à, –∞ –µ–≥–æ –∑–æ–ª–æ—Ç–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –Ω–∞ —à–ª–µ–º–µ –≤–æ–∏–Ω–∞ —Å–ª—É–∂–∏–ª–æ –º–∞–≥–∏—á–µ—Å–∫–∏–º –æ–±–µ—Ä–µ–≥–æ–º.
                        </p>
                    </div>
                    <div class="grid grid-cols-2 gap-4">
                        <div class="p-6 bg-slate-900/80 rounded-3xl border border-amber-500/20">
                            <div class="text-amber-500 font-black mb-2 uppercase text-[10px]">–•–∏—â–Ω–∏–∫</div>
                            <div id="sym-1" class="text-sm font-medium text-slate-100">–í–ª–∞—Å—Ç—å, –ù–µ–±–æ, –û–≥–æ–Ω—å</div>
                        </div>
                        <div class="p-6 bg-slate-900/80 rounded-3xl border border-amber-500/20">
                            <div class="text-amber-500 font-black mb-2 uppercase text-[10px]">–ü—Ç–∏—Ü–∞</div>
                            <div id="sym-2" class="text-sm font-medium text-slate-100">–°–≤–æ–±–æ–¥–∞, –í–µ—Ä—Ö–Ω–∏–π –º–∏—Ä</div>
                        </div>
                    </div>
                </div>
                <div class="absolute -bottom-20 -right-20 text-[25rem] opacity-5 font-black rotate-12">SACRED</div>
            </div>
        </div>

    </main>

    <footer class="mt-20 py-24 bg-black border-t border-amber-900/30 text-center">
        <div class="max-w-4xl mx-auto px-6">
            <p id="footer-text" class="text-2xl md:text-3xl font-light italic leading-tight text-slate-500">
                ¬´–ò—Å–∫—É—Å—Å—Ç–≤–æ –∫–æ—á–µ–≤–Ω–∏–∫–æ–≤ ‚Äî —ç—Ç–æ –º–æ–ª–∏—Ç–≤–∞ –≤ –∑–æ–ª–æ—Ç–µ –∏ –∫–∞–º–Ω–µ, –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω–∞—è –≤ –æ–±—Ä–∞–∑–∞—Ö –∑–≤–µ—Ä–µ–π –∏ –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ–º —Ä–∏—Ç–º–µ –ú–∏—Ä–æ–≤–æ–≥–æ –î—Ä–µ–≤–∞.¬ª
            </p>
            <div class="mt-12 h-1 w-24 bg-amber-700 mx-auto rounded-full"></div>
        </div>
    </footer>

    <script>
        const translations = {
            ru: {
                title: "–î—Ä–µ–≤–Ω–µ–µ –∏—Å–∫—É—Å—Å—Ç–≤–æ –∏ –≤–µ—Ä–æ–≤–∞–Ω–∏—è –∫–æ—á–µ–≤–Ω–∏–∫–æ–≤",
                vizTitle: "–ú–∏—Ä–æ–≤–æ–µ –î—Ä–µ–≤–æ –°—Ç–µ–ø–∏",
                vizDesc: "–ö–æ—á–µ–≤–Ω–∏–∫–∏ –≤–∏–¥–µ–ª–∏ –º–∏—Ä –∫–∞–∫ —Ç—Ä–µ—Ö—á–∞—Å—Ç–Ω—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É. –ù–∞–∂–º–∏—Ç–µ –Ω–∞ —É—Ä–æ–≤–Ω–∏ –î—Ä–µ–≤–∞ —Å–ø—Ä–∞–≤–∞, —á—Ç–æ–±—ã —Ä–∞—Å–∫—Ä—ã—Ç—å —Ñ–∏–ª–æ—Å–æ—Ñ–∏—é –¥—Ä–µ–≤–Ω–µ–≥–æ –º–∏—Ä–æ–≤–æ–∑–∑—Ä–µ–Ω–∏—è.",
                badge: "–ú–æ–¥–µ–ª—å —Å–∞–∫—Ä–∞–ª—å–Ω–æ–π –≤—Å–µ–ª–µ–Ω–Ω–æ–π",
                elementTitleDefault: "–ò—Å—Å–ª–µ–¥—É–π—Ç–µ –í—Å–µ–ª–µ–Ω–Ω—É—é",
                elementDescDefault: "–ö–ª–∏–∫–Ω–∏—Ç–µ –Ω–∞ –∫—Ä–æ–Ω—É, —Å—Ç–≤–æ–ª –∏–ª–∏ –∫–æ—Ä–Ω–∏ –¥–µ—Ä–µ–≤–∞ –Ω–∞ —Ö–æ–ª—Å—Ç–µ.",
                planTitle: "–Ø–∑—ã–∫ –ó–≤–µ—Ä–∏–Ω–æ–≥–æ –°—Ç–∏–ª—è",
                c1T: "–ö–æ–¥ –ó–≤–µ—Ä–∏–Ω–æ–≥–æ –°—Ç–∏–ª—è", c1D: "–≠—Ç–æ –Ω–µ –ø—Ä–æ—Å—Ç–æ –¥–µ–∫–æ—Ä, –∞ –∑–Ω–∞–∫–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞. –•–∏—â–Ω–∏–∫–∏ (–±–∞—Ä—Å, –≤–æ–ª–∫) —Å–∏–º–≤–æ–ª–∏–∑–∏—Ä–æ–≤–∞–ª–∏ –≤–ª–∞—Å—Ç—å, –∞ —Ç—Ä–∞–≤–æ—è–¥–Ω—ã–µ ‚Äî –∂–∏–∑–Ω–µ–Ω–Ω—É—é —ç–Ω–µ—Ä–≥–∏—é. –ë–æ—Ä—å–±–∞ –∑–≤–µ—Ä–µ–π –Ω–∞ —É–∫—Ä–∞—à–µ–Ω–∏—è—Ö –æ—Ç—Ä–∞–∂–∞–ª–∞ —Å–º–µ–Ω—É –≤—Ä–µ–º–µ–Ω –≥–æ–¥–∞ –∏ —Ü–∏–∫–ª—ã –∂–∏–∑–Ω–∏.",
                c2T: "–¢–æ—Ç–µ–º–∏–∑–º –∏ –ú–∞–≥–∏—è", c2D: "–í–µ—Ä–∞ –≤ –ø—Ä–µ–¥–∫–∞-–∂–∏–≤–æ—Ç–Ω–æ–≥–æ –±—ã–ª–∞ —Ñ—É–Ω–¥–∞–º–µ–Ω—Ç–æ–º —Ä–æ–¥–∞. –û–ª–µ–Ω—å–∏ —Ä–æ–≥–∞ –Ω–∞ –º–∞—Å–∫–∞—Ö –∫–æ–Ω–µ–π –≤ –∫—É—Ä–≥–∞–Ω–∞—Ö –ë–µ—Ä–µ–ª—è ‚Äî —ç—Ç–æ —Å–ø–æ—Å–æ–± –Ω–∞–¥–µ–ª–∏—Ç—å –∂–∏–≤–æ—Ç–Ω–æ–µ –º–∞–≥–∏—á–µ—Å–∫–æ–π —Å–∏–ª–æ–π –¥–ª—è –ø–µ—Ä–µ—Ö–æ–¥–∞ –≤ –Ω–µ–±–µ—Å–Ω—ã–π –º–∏—Ä.",
                c3T: "–ö–∞–º–µ–Ω–Ω–∞—è –ö–Ω–∏–≥–∞", c3D: "–ü–µ—Ç—Ä–æ–≥–ª–∏—Ñ—ã –¢–∞–º–≥–∞–ª—ã ‚Äî —ç—Ç–æ –¥—Ä–µ–≤–Ω–∏–µ —Å–≤—è—Ç–∏–ª–∏—â–∞. –û–±—Ä–∞–∑—ã ¬´—Å–æ–ª–Ω—Ü–µ–≥–æ–ª–æ–≤—ã—Ö¬ª –ª—é–¥–µ–π –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç, —á—Ç–æ –∫–æ—á–µ–≤–Ω–∏–∫–∏ –æ–±–æ–∂–µ—Å—Ç–≤–ª—è–ª–∏ –Ω–µ–±–µ—Å–Ω—ã–µ —Å–≤–µ—Ç–∏–ª–∞ –∏ –æ–≥–æ–Ω—å, –≤–∏–¥—è –≤ –Ω–∏—Ö –∏—Å—Ç–æ—á–Ω–∏–∫ –º—É–¥—Ä–æ—Å—Ç–∏.",
                featTitle: "–°–µ–º–∞–Ω—Ç–∏–∫–∞ –û–ª–µ–Ω—è",
                featDesc: "–û–ª–µ–Ω—å ‚Äî –≥–ª–∞–≤–Ω—ã–π –æ–±—Ä–∞–∑ —Å–∞–∫—Å–∫–æ–≥–æ –∏—Å–∫—É—Å—Å—Ç–≤–∞. –ï–≥–æ —Ä–æ–≥–∞, —É—Ö–æ–¥—è—â–∏–µ –≤ –Ω–µ–±–æ, —Å–∏–º–≤–æ–ª–∏–∑–∏—Ä–æ–≤–∞–ª–∏ —Å–≤—è–∑—å –º–∏—Ä–æ–≤ –∏ –±–µ—Å—Å–º–µ—Ä—Ç–∏–µ –¥—É—Ö–∞. –ó–æ–ª–æ—Ç–æ–π –æ–ª–µ–Ω—å –±—ã–ª –≥–ª–∞–≤–Ω—ã–º –æ–±–µ—Ä–µ–≥–æ–º –≤–æ–∂–¥—è.",
                sym1: "–í–ª–∞—Å—Ç—å, –ù–µ–±–æ, –û–≥–æ–Ω—å", sym2: "–°–≤–æ–±–æ–¥–∞, –í–µ—Ä—Ö–Ω–∏–π –º–∏—Ä",
                footer: "¬´–ò—Å–∫—É—Å—Å—Ç–≤–æ –∫–æ—á–µ–≤–Ω–∏–∫–æ–≤ ‚Äî —ç—Ç–æ –º–æ–ª–∏—Ç–≤–∞ –≤ –∑–æ–ª–æ—Ç–µ –∏ –∫–∞–º–Ω–µ, –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω–∞—è –≤ –æ–±—Ä–∞–∑–∞—Ö –∑–≤–µ—Ä–µ–π –∏ –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ–º —Ä–∏—Ç–º–µ –ú–∏—Ä–æ–≤–æ–≥–æ –î—Ä–µ–≤–∞.¬ª",
                worlds: {
                    upper: { name: "–í–µ—Ä—Ö–Ω–∏–π –º–∏—Ä (–ê—Å–ø–∞–Ω)", text: "–ú–∏—Ä –±–æ–≥–æ–≤ –∏ —Å–≤—è—â–µ–Ω–Ω—ã—Ö –ø—Ç–∏—Ü. –°–∏–º–≤–æ–ª–∏–∑–∏—Ä—É–µ—Ç –±—É–¥—É—â–µ–µ –∏ –¥—É—Ö. –ï–≥–æ –æ–±–∏—Ç–∞—Ç–µ–ª–∏ ‚Äî –ø—Ç–∏—Ü—ã (–≥—Ä–∏—Ñ–æ–Ω, –æ—Ä–µ–ª), –ø–æ–º–æ–≥–∞—é—â–∏–µ —Å–≤—è–∑—ã–≤–∞—Ç—å —á–µ–ª–æ–≤–µ–∫–∞ —Å –Ω–µ–±–æ–º." },
                    middle: { name: "–°—Ä–µ–¥–Ω–∏–π –º–∏—Ä (–ñ–µ—Ä)", text: "–ú–∏—Ä –ª—é–¥–µ–π –∏ –∂–∏–≤–æ—Ç–Ω—ã—Ö. –°–∏–º–≤–æ–ª–∏–∑–∏—Ä—É–µ—Ç –Ω–∞—Å—Ç–æ—è—â–µ–µ. –ó–¥–µ—Å—å –æ–±–∏—Ç–∞—é—Ç –∫–æ–ø—ã—Ç–Ω—ã–µ –∏ —Ö–∏—â–Ω–∏–∫–∏. –≠—Ç–æ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ –±–æ—Ä—å–±—ã –∏ —Å–æ–∑–∏–¥–∞–Ω–∏—è." },
                    lower: { name: "–ù–∏–∂–Ω–∏–π –º–∏—Ä (–ñ–µ—Ä –∞—Å—Ç—ã)", text: "–ú–∏—Ä –ø—Ä–µ–¥–∫–æ–≤ –∏ –ø–æ–¥–∑–µ–º–Ω—ã—Ö —Å–∏–ª. –°–∏–º–≤–æ–ª–∏–∑–∏—Ä—É–µ—Ç –ø—Ä–æ—à–ª–æ–µ. –ï–≥–æ —Å–∏–º–≤–æ–ª—ã ‚Äî –∑–º–µ–∏, —Ä—ã–±—ã –∏ —Ñ–∞–Ω—Ç–∞—Å—Ç–∏—á–µ—Å–∫–∏–µ —Å—É—â–µ—Å—Ç–≤–∞, –æ—Ö—Ä–∞–Ω—è—é—â–∏–µ –ø–æ–∫–æ–π –º–µ—Ä—Ç–≤—ã—Ö." }
                }
            },
            kz: {
                title: "–ö”©—à–ø–µ–ª—ñ–ª–µ—Ä–¥—ñ“£ –µ–∂–µ–ª–≥—ñ ”©–Ω–µ—Ä—ñ –º–µ–Ω –Ω–∞–Ω—ã–º-—Å–µ–Ω—ñ–º–¥–µ—Ä—ñ",
                vizTitle: "–î–∞–ª–∞–Ω—ã“£ –ë”ô–π—Ç–µ—Ä–µ–≥—ñ",
                vizDesc: "–ö”©—à–ø–µ–ª—ñ–ª–µ—Ä ”ô–ª–µ–º–¥—ñ “Ø—à –¥–µ“£–≥–µ–π–ª—ñ “õ“±—Ä—ã–ª—ã–º —Ä–µ—Ç—ñ–Ω–¥–µ –∫”©—Ä–¥—ñ. –ï–∂–µ–ª–≥—ñ –¥“Ø–Ω–∏–µ—Ç–∞–Ω—ã–º —Ñ–∏–ª–æ—Å–æ—Ñ–∏—è—Å—ã–Ω –±—ñ–ª—É “Ø—à—ñ–Ω –∞“ì–∞—à –¥–µ“£–≥–µ–π–ª–µ—Ä—ñ–Ω –±–∞—Å—ã“£—ã–∑.",
                badge: "“ö–∞—Å–∏–µ—Ç—Ç—ñ “ì–∞–ª–∞–º –º–æ–¥–µ–ª—ñ",
                elementTitleDefault: "”ò–ª–µ–º–¥—ñ –∑–µ—Ä—Ç—Ç–µ“£—ñ–∑",
                elementDescDefault: "–ö–µ–Ω–µ–ø—Ç–µ–≥—ñ –∞“ì–∞—à—Ç—ã“£ –±“±—Ç–∞“õ—Ç–∞—Ä—ã–Ω, –¥—ñ“£—ñ–Ω –Ω–µ–º–µ—Å–µ —Ç–∞–º—ã—Ä—ã–Ω –±–∞—Å—ã“£—ã–∑.",
                planTitle: "–ê“£ —Å—Ç–∏–ª—ñ–Ω—ñ“£ —Ç—ñ–ª—ñ",
                c1T: "–ê“£ —Å—Ç–∏–ª—ñ–Ω—ñ“£ –∫–æ–¥—ã", c1D: "–ë“±–ª –∂–∞–π “ì–∞–Ω–∞ ”ô—à–µ–∫–µ–π –µ–º–µ—Å, —Ç–∞“£–±–∞–ª—ã“õ –∂“Ø–π–µ. –ñ—ã—Ä—Ç“õ—ã—à—Ç–∞—Ä –±–∏–ª—ñ–∫—Ç—ñ, –∞–ª —à”©–ø“õ–æ—Ä–µ–∫—Ç—ñ–ª–µ—Ä ”©–º—ñ—Ä–ª—ñ–∫ —ç–Ω–µ—Ä–≥–∏—è–Ω—ã –±—ñ–ª–¥—ñ—Ä–≥–µ–Ω. ”ò—à–µ–∫–µ–π–ª–µ—Ä–¥–µ–≥—ñ –∞“£–¥–∞—Ä –∞–π“õ–∞—Å—ã –∂—ã–ª –º–µ–∑–≥—ñ–ª–¥–µ—Ä—ñ–Ω—ñ“£ –∞—É—ã—Å—É—ã–Ω –±–µ–π–Ω–µ–ª–µ–≥–µ–Ω.",
                c2T: "–¢–æ—Ç–µ–º–∏–∑–º –∂”ô–Ω–µ –ú–∞–≥–∏—è", c2D: "–ñ–∞–Ω—É–∞—Ä-–±–∞–±–∞“ì–∞ —Å–µ–Ω—É —Ä—É–¥—ã“£ –Ω–µ–≥—ñ–∑—ñ –±–æ–ª–¥—ã. –ë–µ—Ä–µ–ª “õ–æ—Ä“ì–∞–Ω–¥–∞—Ä—ã–Ω–¥–∞“ì—ã –∞—Ç—Ç–∞—Ä“ì–∞ –∫–∏–≥—ñ–∑—ñ–ª–≥–µ–Ω –±“±“ì—ã –º“Ø–π—ñ–∑–¥—ñ –º–∞—Å–∫–∞–ª–∞—Ä ‚Äî –∂–∞–Ω—É–∞—Ä“ì–∞ –∫”©–∫ ”ô–ª–µ–º—ñ–Ω–µ ”©—Ç—É “Ø—à—ñ–Ω —Ç—ã–ª—Å—ã–º –∫“Ø—à –±–µ—Ä—É —Ç”ô—Å—ñ–ª—ñ.",
                c3T: "–¢–∞—Å –∫—ñ—Ç–∞–±—ã", c3D: "–¢–∞–º“ì–∞–ª—ã –ø–µ—Ç—Ä–æ–≥–ª–∏—Ñ—Ç–µ—Ä—ñ ‚Äî –µ–∂–µ–ª–≥—ñ “ì–∏–±–∞–¥–∞—Ç—Ö–∞–Ω–∞–ª–∞—Ä. ¬´–ö“Ø–Ω–±–∞—Å—Ç—ã¬ª –∞–¥–∞–º–¥–∞—Ä –±–µ–π–Ω–µ—Å—ñ –∫”©—à–ø–µ–ª—ñ–ª–µ—Ä–¥—ñ“£ –∞—Å–ø–∞–Ω —à—ã—Ä–∞“õ—Ç–∞—Ä—ã –º–µ–Ω –æ—Ç“õ–∞ —Ç–∞–±—ã–Ω“ì–∞–Ω—ã–Ω –∫”©—Ä—Å–µ—Ç–µ–¥—ñ.",
                featTitle: "–ë“±“ì—ã —Å–µ–º–∞–Ω—Ç–∏–∫–∞—Å—ã",
                featDesc: "–ë“±“ì—ã ‚Äî —Å–∞“õ ”©–Ω–µ—Ä—ñ–Ω—ñ“£ –±–∞—Å—Ç—ã –±–µ–π–Ω–µ—Å—ñ. –û–Ω—ã“£ –∫”©–∫–∫–µ ”©—Ä–ª–µ–≥–µ–Ω –º“Ø–π—ñ–∑–¥–µ—Ä—ñ ”ô–ª–µ–º–¥–µ—Ä –±–∞–π–ª–∞–Ω—ã—Å—ã –º–µ–Ω —Ä—É—Ö—Ç—ã“£ ”©–ª–º–µ—Å –Ω—ã—à–∞–Ω—ã. –ê–ª—Ç—ã–Ω –±“±“ì—ã –∫”©—Å–µ–º–Ω—ñ“£ –±–∞—Å—Ç—ã –±–æ–π—Ç“±–º–∞—Ä—ã —Å–∞–Ω–∞–ª“ì–∞–Ω.",
                sym1: "–ë–∏–ª—ñ–∫, –ê—Å–ø–∞–Ω, –û—Ç", sym2: "–ë–æ—Å—Ç–∞–Ω–¥—ã“õ, –ñ–æ“ì–∞—Ä“ì—ã ”ô–ª–µ–º",
                footer: "¬´–ö”©—à–ø–µ–ª—ñ–ª–µ—Ä ”©–Ω–µ—Ä—ñ ‚Äî –∞“£–¥–∞—Ä –±–µ–π–Ω–µ—Å—ñ –º–µ–Ω –ë”ô–π—Ç–µ—Ä–µ–∫—Ç—ñ“£ —à–µ–∫—Å—ñ–∑ —ã—Ä“ì–∞“ì—ã–Ω–¥–∞ –∂–∞—Å—ã—Ä—ã–ª“ì–∞–Ω –∞–ª—Ç—ã–Ω –º–µ–Ω —Ç–∞—Å—Ç–∞“ì—ã –º—ñ–Ω”ô–∂–∞—Ç.¬ª",
                worlds: {
                    upper: { name: "–ñ–æ“ì–∞—Ä“ì—ã ”ô–ª–µ–º (–ê—Å–ø–∞–Ω)", text: "“ö“±–¥–∞–π–ª–∞—Ä –º–µ–Ω “õ–∞—Å–∏–µ—Ç—Ç—ñ “õ“±—Å—Ç–∞—Ä –º–µ–∫–µ–Ω—ñ. –ë–æ–ª–∞—à–∞“õ –ø–µ–Ω —Ä—É—Ö—Ç—ã –±—ñ–ª–¥—ñ—Ä–µ–¥—ñ. –û–Ω—ã“£ —Ç“±—Ä“ì—ã–Ω–¥–∞—Ä—ã ‚Äî –∞–¥–∞–º–¥—ã –∫”©–∫–ø–µ–Ω –±–∞–π–ª–∞–Ω—ã—Å—Ç—ã—Ä–∞—Ç—ã–Ω “õ“±—Å—Ç–∞—Ä (–≥—Ä–∏—Ñ–æ–Ω, –±“Ø—Ä–∫—ñ—Ç)." },
                    middle: { name: "–û—Ä—Ç–∞“£“ì—ã ”ô–ª–µ–º (–ñ–µ—Ä)", text: "–ê–¥–∞–º–¥–∞—Ä –º–µ–Ω –∂–∞–Ω—É–∞—Ä–ª–∞—Ä ”ô–ª–µ–º—ñ. –û—Å—ã —à–∞“õ—Ç—ã –±—ñ–ª–¥—ñ—Ä–µ–¥—ñ. –ú“±–Ω–¥–∞ —Ç“±—è“õ—Ç—ã–ª–∞—Ä –º–µ–Ω –∂—ã—Ä—Ç“õ—ã—à—Ç–∞—Ä –º–µ–∫–µ–Ω–¥–µ–π–¥—ñ. –ë“±–ª ‚Äî –∫“Ø—Ä–µ—Å –ø–µ–Ω –∂–∞—Ä–∞—Ç—ã–ª—ã—Å –∫–µ“£—ñ—Å—Ç—ñ–≥—ñ." },
                    lower: { name: "–¢”©–º–µ–Ω–≥—ñ ”ô–ª–µ–º (–ñ–µ—Ä –∞—Å—Ç—ã)", text: "–ê—Ç–∞-–±–∞–±–∞–ª–∞—Ä –º–µ–Ω –∂–µ—Ä –∞—Å—Ç—ã –∫“Ø—à—Ç–µ—Ä—ñ–Ω—ñ“£ ”ô–ª–µ–º—ñ. ”®—Ç–∫–µ–Ω —à–∞“õ—Ç—ã –±—ñ–ª–¥—ñ—Ä–µ–¥—ñ. –ù—ã—à–∞–Ω–¥–∞—Ä—ã ‚Äî –∂—ã–ª–∞–Ω–¥–∞—Ä, –±–∞–ª—ã“õ—Ç–∞—Ä –∂”ô–Ω–µ ”©–ª—ñ–ª–µ—Ä —Ç—ã–Ω—ã—à—Ç—ã“ì—ã–Ω “õ–æ—Ä“ì–∞–π—Ç—ã–Ω –º–∞“õ“±–ª—ã“õ—Ç–∞—Ä." }
                }
            },
            en: {
                title: "Ancient Art and Beliefs of Nomads",
                vizTitle: "The Steppe World Tree",
                vizDesc: "Nomads saw the world as a tripartite structure. Click on the Tree levels to the right to reveal the philosophy of the ancient worldview.",
                badge: "Sacred Universe Model",
                elementTitleDefault: "Explore the Universe",
                elementDescDefault: "Click on the crown, trunk, or roots of the tree on the canvas.",
                planTitle: "The Language of Animal Style",
                c1T: "The Animal Style Code", c1D: "This isn't just decor; it's a sign system. Predators symbolized power, while herbivores represented life energy. Animal combat depicted on jewelry reflected seasonal cycles and the circle of life.",
                c2T: "Totemism and Magic", c2D: "Belief in an animal ancestor was the clan's foundation. Stag antlers on horse masks in Berel mounds were a way to give the animal magical power to travel to the celestial world.",
                c3T: "The Stone Book", c3D: "Tamgaly petroglyphs are open-air temples. Images of 'sun-headed' deities show that nomads deified celestial bodies and fire as sources of wisdom.",
                featTitle: "Stag Semantics",
                featDesc: "The stag is the central image of Saka art. Its antlers, reaching to the sky, symbolized the connection of worlds and immortality. A golden stag was a chieftain's primary magical amulet.",
                sym1: "Power, Sky, Fire", sym2: "Freedom, Upper World",
                footer: "¬´Nomadic art is a prayer in gold and stone, encoded in animal images and the infinite rhythm of the World Tree.¬ª",
                worlds: {
                    upper: { name: "Upper World (Aspan)", text: "The realm of gods and sacred birds. Symbolizes the future and spirit. Inhabitants like griffin and eagle helped connect humans to heaven." },
                    middle: { name: "Middle World (Zher)", text: "The realm of humans and animals. Symbolizes the present. Home to hoofed animals and predators; a space of struggle and creation." },
                    lower: { name: "Lower World (Zher asty)", text: "The realm of ancestors and underworld forces. Symbolizes the past. Represented by snakes, fish, and mythical guardians of the dead." }
                }
            }
        };

        let currentLang = 'ru';
        const canvas = document.getElementById('cosmoCanvas');
        const ctx = canvas.getContext('2d');

        function resizeCanvas() {
            const container = canvas.parentElement;
            canvas.width = container.clientWidth;
            canvas.height = 500;
            drawTree();
        }

        function drawTree() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            const cx = canvas.width / 2;
            const cy = canvas.height / 2;
            const scale = canvas.height / 500;

            // 1. Draw Axis (Trunk)
            ctx.beginPath();
            ctx.moveTo(cx, 100 * scale);
            ctx.lineTo(cx, 400 * scale);
            ctx.strokeStyle = 'rgba(234, 179, 8, 0.4)';
            ctx.lineWidth = 10 * scale;
            ctx.stroke();

            // 2. Upper World (Crown)
            ctx.beginPath();
            ctx.arc(cx, 100 * scale, 60 * scale, 0, Math.PI * 2);
            ctx.fillStyle = 'rgba(234, 179, 8, 0.2)';
            ctx.fill();
            ctx.strokeStyle = '#eab308';
            ctx.stroke();
            // Bird icon simplified
            ctx.font = `${30 * scale}px serif`;
            ctx.textAlign = 'center';
            ctx.fillText("ü¶Ö", cx, 110 * scale);

            // 3. Middle World (Center)
            ctx.beginPath();
            ctx.arc(cx, cy, 70 * scale, 0, Math.PI * 2);
            ctx.fillStyle = 'rgba(148, 163, 184, 0.2)';
            ctx.fill();
            ctx.strokeStyle = '#94a3b8';
            ctx.stroke();
            ctx.fillText("üêÜ", cx, cy + 10 * scale);

            // 4. Lower World (Roots)
            ctx.beginPath();
            ctx.arc(cx, 400 * scale, 60 * scale, 0, Math.PI * 2);
            ctx.fillStyle = 'rgba(153, 27, 27, 0.2)';
            ctx.fill();
            ctx.strokeStyle = '#991b1b';
            ctx.stroke();
            ctx.fillText("üêç", cx, 410 * scale);

            // Decorative star dust
            for(let i=0; i<20; i++) {
                ctx.fillStyle = 'rgba(234, 179, 8, 0.5)';
                ctx.beginPath();
                ctx.arc(Math.random()*canvas.width, Math.random()*canvas.height, 1, 0, Math.PI*2);
                ctx.fill();
            }
        }

        canvas.addEventListener('click', (e) => {
            const rect = canvas.getBoundingClientRect();
            const y = e.clientY - rect.top;
            const scale = canvas.height / 500;

            let zone = null;
            if (y < 160 * scale) zone = 'upper';
            else if (y > 340 * scale) zone = 'lower';
            else zone = 'middle';

            if (zone) {
                const info = translations[currentLang].worlds[zone];
                document.getElementById('element-title').innerText = info.name;
                document.getElementById('element-desc').innerText = info.text;
                document.getElementById('info-panel').style.borderColor = (zone === 'upper' ? '#eab308' : (zone === 'middle' ? '#94a3b8' : '#991b1b'));
            }
        });

        function setLang(lang) {
            currentLang = lang;
            const t = translations[lang];
            
            document.getElementById('main-title').innerText = t.title;
            document.getElementById('viz-title').innerText = t.vizTitle;
            document.getElementById('viz-desc').innerText = t.vizDesc;
            document.getElementById('badge').innerText = t.badge;
            document.getElementById('element-title').innerText = t.elementTitleDefault;
            document.getElementById('element-desc').innerText = t.elementDescDefault;
            document.getElementById('plan-title').innerText = t.planTitle;
            document.getElementById('c1-t').innerText = t.c1T; document.getElementById('c1-d').innerText = t.c1D;
            document.getElementById('c2-t').innerText = t.c2T; document.getElementById('c2-d').innerText = t.c2D;
            document.getElementById('c3-t').innerText = t.c3T; document.getElementById('c3-d').innerText = t.c3D;
            document.getElementById('feat-title').innerText = t.featTitle;
            document.getElementById('feat-desc').innerText = t.featDesc;
            document.getElementById('sym-1').innerText = t.sym1;
            document.getElementById('sym-2').innerText = t.sym2;
            document.getElementById('footer-text').innerText = t.footer;

            ['ru', 'kz', 'en'].forEach(l => {
                const btn = document.getElementById(`btn-${l}`);
                btn.className = l === lang 
                    ? "px-6 py-2 rounded-lg text-sm font-black lang-active" 
                    : "px-6 py-2 rounded-lg text-sm font-bold text-slate-500 hover:text-amber-500 transition-all";
            });

            resizeCanvas();
        }

        window.addEventListener('resize', resizeCanvas);
        window.onload = () => setLang('ru');
    </script>

<script type="text/javascript" src="qrc:///qtwebchannel/qwebchannel.js"></script>
<script>
    function goBack() {
        console.log('goBack() –≤—ã–∑–≤–∞–Ω–∞');
        if (typeof bridge !== 'undefined' && bridge) {
            console.log('Bridge –Ω–∞–π–¥–µ–Ω, –≤—ã–∑—ã–≤–∞—é onBackClicked()');
            bridge.onBackClicked();
        } else {
            console.log('Bridge –Ω–µ –Ω–∞–π–¥–µ–Ω!');
        }
    }

    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è QWebChannel
    document.addEventListener('DOMContentLoaded', function() {
        console.log('–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è QWebChannel...');

        if (typeof QWebChannel !== 'undefined' && typeof qt !== 'undefined') {
            try {
                new QWebChannel(qt.webChannelTransport, function(channel) {
                    window.bridge = channel.objects.bridge;
                    console.log('‚úÖ Bridge –ø–æ–¥–∫–ª—é—á–µ–Ω!');
                });
            } catch(e) {
                console.error('‚ùå QWebChannel –æ—à–∏–±–∫–∞:', e);
            }
        } else {
            console.warn('‚ö†Ô∏è QWebChannel –∏–ª–∏ qt –Ω–µ –Ω–∞–π–¥–µ–Ω');
        }
    });
</script>






<style data-oi-map-overlay>
.oi-map-btn{
  position:fixed; right:16px; bottom:16px; z-index:9999;
  padding:10px 14px; border-radius:999px; border:1px solid rgba(0,0,0,.15);
  background:#fff; cursor:pointer; font:600 14px/1.1 system-ui,-apple-system,Segoe UI,Roboto,Arial;
  box-shadow:0 8px 20px rgba(0,0,0,.12);
}
.oi-map-backdrop{
  position:fixed; inset:0; background:rgba(0,0,0,.72); z-index:10000;
  display:none; align-items:center; justify-content:center; padding:18px;
}
.oi-map-backdrop[aria-hidden="false"]{ display:flex; }
.oi-map-modal{
  width:min(1100px, 100%); height:min(85vh, 900px);
  background:#111; border-radius:14px; overflow:hidden; position:relative;
  box-shadow:0 20px 60px rgba(0,0,0,.35);
}
.oi-map-close{
  position:absolute; top:10px; right:10px; z-index:3;
  width:40px; height:40px; border-radius:999px; border:1px solid rgba(255,255,255,.25);
  background:rgba(0,0,0,.35); color:#fff; cursor:pointer; font-size:22px;
}
.oi-map-viewport{
  width:100%; height:100%; overflow:auto; -webkit-overflow-scrolling:touch;
  touch-action: pan-x pan-y;
  background:#000;
  padding-top:56px; /* –º–µ—Å—Ç–æ –ø–æ–¥ —Ç—É–ª–±–∞—Ä */
}
.oi-map-img{
  display:block;
  transform-origin: 0 0;
  user-select:none; -webkit-user-drag:none;
}
.oi-map-toolbar{
  position:absolute; left:12px; top:12px; right:12px; z-index:2;
  display:flex; align-items:center; justify-content:space-between; gap:10px;
  pointer-events:none;
}
.oi-map-tabs{ display:flex; gap:8px; pointer-events:auto; }
.oi-map-tab{
  width:36px; height:34px; border-radius:10px;
  border:1px solid rgba(255,255,255,.22);
  background:rgba(0,0,0,.35); color:#fff;
  cursor:pointer; font:600 14px system-ui,-apple-system,Segoe UI,Roboto,Arial;
}
.oi-map-tab.is-active{
  background:rgba(255,255,255,.12);
  border-color: rgba(255,255,255,.45);
}
.oi-map-hint{
  pointer-events:none;
  color:#fff; opacity:.85; font:12px/1.2 system-ui,-apple-system,Segoe UI,Roboto,Arial;
  background:rgba(0,0,0,.35); border:1px solid rgba(255,255,255,.18);
  padding:8px 10px; border-radius:10px;
}
</style>

<button class="oi-map-btn" type="button" data-oi-map-btn>üó∫Ô∏è –ö–∞—Ä—Ç–∞</button>

<div class="oi-map-backdrop" aria-hidden="true" data-oi-map-backdrop>
  <div class="oi-map-modal" role="dialog" aria-modal="true" aria-label="–ö–∞—Ä—Ç–∞">
    <button class="oi-map-close" type="button" aria-label="–ó–∞–∫—Ä—ã—Ç—å" data-oi-map-close>√ó</button>

    <div class="oi-map-toolbar">
      <div class="oi-map-tabs">
        <button type="button" class="oi-map-tab is-active" data-oi-map-tab="1">1</button>
        <button type="button" class="oi-map-tab" data-oi-map-tab="2">2</button>
        <button type="button" class="oi-map-tab" data-oi-map-tab="3">3</button>
        <button type="button" class="oi-map-tab" data-oi-map-tab="4">4</button>
      </div>
      <div class="oi-map-hint">–ö–æ–ª—ë—Å–∏–∫–æ/—Ç—Ä–µ–∫–ø–∞–¥ ‚Äî –∑—É–º ‚Ä¢ Esc ‚Äî –∑–∞–∫—Ä—ã—Ç—å</div>
    </div>

    <div class="oi-map-viewport" data-oi-map-viewport>
      <img class="oi-map-img" data-oi-map-img data-map="1" src="../../assets/maps/karta_1.png" alt="–ö–∞—Ä—Ç–∞ 1" style="display:block;">
<img class="oi-map-img" data-oi-map-img data-map="2" src="../../assets/maps/karta_2.png" alt="–ö–∞—Ä—Ç–∞ 2" style="display:none;">
<img class="oi-map-img" data-oi-map-img data-map="3" src="../../assets/maps/karta_3.png" alt="–ö–∞—Ä—Ç–∞ 3" style="display:none;">
<img class="oi-map-img" data-oi-map-img data-map="4" src="../../assets/maps/karta_4.png" alt="–ö–∞—Ä—Ç–∞ 4" style="display:none;">
    </div>
  </div>
</div>


<script data-oi-map-overlay>
(function(){
  const btn = document.querySelector('[data-oi-map-btn]');
  const backdrop = document.querySelector('[data-oi-map-backdrop]');
  const closeBtn = document.querySelector('[data-oi-map-close]');
  const viewport = document.querySelector('[data-oi-map-viewport]');
  const tabs = Array.from(document.querySelectorAll('[data-oi-map-tab]'));
  const imgs = Array.from(document.querySelectorAll('[data-oi-map-img][data-map]'));
  if(!btn || !backdrop || !closeBtn || !viewport || imgs.length === 0) return;

  let scale = 1;

  function applyScale(){
    imgs.forEach(img => { img.style.transform = `scale(${scale})`; });
  }
  function openMap(){
    backdrop.setAttribute('aria-hidden','false');
    document.body.style.overflow = 'hidden';
  }
  function closeMap(){
    backdrop.setAttribute('aria-hidden','true');
    document.body.style.overflow = '';
  }
  function showMap(n){
    imgs.forEach(img => {
      img.style.display = (img.getAttribute('data-map') === String(n)) ? 'block' : 'none';
    });
    tabs.forEach(t => t.classList.toggle('is-active', t.getAttribute('data-oi-map-tab') === String(n)));
    viewport.scrollTop = 0;
    viewport.scrollLeft = 0;
  }

  btn.addEventListener('click', openMap);
  closeBtn.addEventListener('click', closeMap);
  backdrop.addEventListener('click', (e)=>{ if(e.target === backdrop) closeMap(); });
  window.addEventListener('keydown', (e)=>{ if(e.key === 'Escape') closeMap(); });

  tabs.forEach(t => t.addEventListener('click', () => showMap(t.getAttribute('data-oi-map-tab'))));

  viewport.addEventListener('wheel', (e)=>{
    if(backdrop.getAttribute('aria-hidden') !== 'false') return;
    e.preventDefault();
    const delta = -Math.sign(e.deltaY) * 0.1;
    scale = Math.min(4, Math.max(0.6, scale + delta));
    applyScale();
  }, {passive:false});

  applyScale();
  showMap(1);
})();
</script>
</body>
</html>