<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Inflorescences</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body { background: #111827; color: #fff; font-family: 'Inter'; min-height: 100vh; }
        .glass { background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1); }
        .rounded-custom { border-radius: 1.5rem; }
        canvas { cursor: pointer; }
        .type-btn:hover { color: #a3e635; border-color: #a3e635; }
    </style>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
</head>
<body class="p-8 flex flex-col h-screen">

<div class="flex justify-between mb-8">
        <h1 class="text-3xl font-bold text-lime-400">INFLORESCENCE</h1>
        <div class="flex gap-2 text-xs font-bold text-gray-500">
            <button onclick="window.setL('ru')" class="hover:text-white">RU</button>
            <button onclick="window.setL('en')" class="hover:text-white">EN</button>
        </div>
    </div>

    <div class="flex-grow grid grid-cols-1 lg:grid-cols-4 gap-8">
        <div class="glass rounded-custom p-6 flex flex-col gap-2">
            <button onclick="window.setI('raceme')" class="type-btn p-3 border border-white/10 rounded text-left text-sm font-bold">Raceme (Кисть)</button>
            <button onclick="window.setI('spike')" class="type-btn p-3 border border-white/10 rounded text-left text-sm font-bold">Spike (Колос)</button>
            <button onclick="window.setI('umbel')" class="type-btn p-3 border border-white/10 rounded text-left text-sm font-bold">Umbel (Зонтик)</button>
            <button onclick="window.setI('head')" class="type-btn p-3 border border-white/10 rounded text-left text-sm font-bold">Head (Головка)</button>
            <button onclick="window.setI('panicle')" class="type-btn p-3 border border-white/10 rounded text-left text-sm font-bold text-yellow-200">Panicle (Метелка)</button>
        </div>

        <div class="lg:col-span-2 relative glass rounded-custom p-8 bg-black/30 flex items-center justify-center">
            <canvas id="infCanvas" class="w-full h-full"></canvas>
        </div>

        <div class="glass rounded-custom p-8 flex flex-col justify-center border-l-4 border-lime-600">
            <h2 id="i-title" class="text-2xl font-bold mb-4 text-lime-300"></h2>
            <p id="i-desc" class="text-sm text-gray-400 leading-relaxed"></p>
            <div class="mt-8 p-4 bg-lime-900/20 rounded-xl text-xs font-mono text-lime-500">
                BIOLOGICAL SIGNIFICANCE:<br>Increases pollination probability
            </div>
        </div>
    </div>

    <script>
        const bio9Data = {
            ru: {
                raceme: {t: "Кисть", d: "Цветки сидят на удлиненной главной оси на цветоножках. (Ландыш, Черемуха, Капуста)"},
                spike: {t: "Колос", d: "Цветки сидячие (без цветоножек) на удлиненной главной оси. (Подорожник, Осока)"},
                umbel: {t: "Зонтик", d: "Главная ось укорочена, цветоножки выходят из одной точки, как спицы зонта. (Вишня, Примула)"},
                head: {t: "Головка", d: "Главная ось утолщена и укорочена, цветки сидячие или на коротких ножках. (Клевер)"},
                panicle: {t: "Метелка", d: "Сложное соцветие. Главная ось ветвится, несет простые кисти или колосья. (Сирень, Овес)"}
            },
            en: {
                raceme: {t: "Raceme", d: "Flowers are attached to an elongated main axis by pedicels. (Lily of the valley)"},
                spike: {t: "Spike", d: "Sessile flowers (no pedicels) on an elongated main axis. (Plantain)"},
                umbel: {t: "Umbel", d: "Main axis shortened, pedicels radiate from a single point. (Cherry)"},
                head: {t: "Head", d: "Thickened short axis with sessile flowers. (Clover)"},
                panicle: {t: "Panicle", d: "Complex inflorescence. Branched main axis bearing simple racemes. (Lilac)"}
            }
        };

        let lang='ru', type='raceme', cx, cvs;

        window.setL = (l) => { lang = l; update(); }
        window.setI = (t) => { type = t; update(); }

        function update() {
            const d = bio9Data[lang][type];
            document.getElementById('i-title').textContent = d.t;
            document.getElementById('i-desc').textContent = d.d;
            draw();
        }

        function draw() {
            if(!cx) return;
            const w = cvs.width, h = cvs.height;
            cx.clearRect(0,0,w,h);
            const cx_ = w/2;

            cx.strokeStyle = '#4d7c0f'; cx.lineWidth = 4; cx.lineCap = 'round';

            if (type === 'raceme') {
                cx.beginPath(); cx.moveTo(cx_, h-50); cx.lineTo(cx_, 50); cx.stroke(); // Main axis
                for(let i=100; i<h-50; i+=50) {
                    drawPedicel(cx_, i, 40, true);
                    drawPedicel(cx_, i+25, 40, false);
                }
            } else if (type === 'spike') {
                cx.beginPath(); cx.moveTo(cx_, h-50); cx.lineTo(cx_, 50); cx.stroke();
                for(let i=100; i<h-50; i+=40) {
                    drawFlower(cx_-10, i, '#fbbf24');
                    drawFlower(cx_+10, i+20, '#fbbf24');
                }
            } else if (type === 'umbel') {
                cx.beginPath(); cx.moveTo(cx_, h); cx.lineTo(cx_, h/2); cx.stroke();
                const centerY = h/2;
                for(let i=-3; i<=3; i++) {
                    cx.beginPath(); cx.moveTo(cx_, centerY); cx.lineTo(cx_ + i*40, centerY-100 + Math.abs(i)*10); cx.stroke();
                    drawFlower(cx_ + i*40, centerY-100 + Math.abs(i)*10, '#f472b6');
                }
            } else if (type === 'head') {
                cx.beginPath(); cx.moveTo(cx_, h); cx.lineTo(cx_, h/2); cx.stroke();
                cx.fillStyle = '#4d7c0f'; cx.beginPath(); cx.ellipse(cx_, h/2, 30, 20, 0, 0, Math.PI*2); cx.fill();
                for(let i=0; i<20; i++) {
                    drawFlower(cx_ + (Math.random()-0.5)*50, h/2 + (Math.random()-0.5)*30 - 10, '#d8b4fe');
                }
            } else { // Panicle
                drawBranch(cx_, h-20, h*0.8, 0, 0);
            }
        }

        function drawBranch(x, y, len, angle, depth) {
            if (depth > 2) { drawFlower(x, y, '#a78bfa'); return; }
            const ex = x + Math.sin(angle)*len;
            const ey = y - Math.cos(angle)*len;
            cx.beginPath(); cx.moveTo(x, y); cx.lineTo(ex, ey); cx.stroke();
            drawBranch(ex, ey, len*0.6, angle - 0.5, depth+1);
            drawBranch(ex, ey, len*0.6, angle + 0.5, depth+1);
        }

        function drawPedicel(x, y, len, left) {
            cx.beginPath(); cx.moveTo(x, y); cx.lineTo(left ? x-len : x+len, y-10); cx.stroke();
            drawFlower(left ? x-len : x+len, y-10, '#fff');
        }

        function drawFlower(x, y, c) {
            cx.fillStyle = c;
            cx.beginPath(); cx.arc(x, y, 8, 0, Math.PI*2); cx.fill();
        }

        window.onload = () => {
            cvs = document.getElementById('infCanvas'); cx = cvs.getContext('2d');
            const rs = () => { cvs.width = cvs.parentElement.clientWidth; cvs.height = cvs.parentElement.clientHeight; draw(); };
            window.addEventListener('resize', rs); rs();
            window.setL('ru');
        }
    </script>

<script type="text/javascript" src="qrc:///qtwebchannel/qwebchannel.js"></script>


</body>
</html>