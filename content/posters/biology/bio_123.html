<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Root System</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body { background: #27272a; color: #fff; font-family: 'Inter'; min-height: 100vh; }
        .glass { background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1); border-radius: 1.5rem; }
        canvas { cursor: crosshair; }
    </style>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
</head>
<body class="p-8 grid grid-cols-1 lg:grid-cols-3 gap-8">

<div class="lg:col-span-1 flex flex-col gap-6">
        <h1 class="text-4xl font-bold text-amber-500" id="title"></h1>
        <div class="glass p-6">
            <h3 class="text-lg font-bold text-amber-200 mb-2">Zones (Зоны)</h3>
            <ul class="space-y-2 text-sm text-gray-400">
                <li class="hover:text-white cursor-pointer" onmouseover="window.hl(0)">1. Division / Деления</li>
                <li class="hover:text-white cursor-pointer" onmouseover="window.hl(1)">2. Elongation / Растяжения</li>
                <li class="hover:text-white cursor-pointer" onmouseover="window.hl(2)">3. Absorption / Всасывания</li>
                <li class="hover:text-white cursor-pointer" onmouseover="window.hl(3)">4. Conduction / Проведения</li>
            </ul>
        </div>
        <div class="mt-auto flex gap-2">
            <button onclick="window.setL('ru')" class="bg-gray-800 px-3 py-1 rounded text-xs font-bold">RU</button>
            <button onclick="window.setL('kz')" class="bg-gray-800 px-3 py-1 rounded text-xs font-bold">KZ</button>
            <button onclick="window.setL('en')" class="bg-gray-800 px-3 py-1 rounded text-xs font-bold">EN</button>
        </div>
    </div>

    <div class="lg:col-span-2 relative glass p-4 h-[600px] flex justify-center bg-black/40">
        <canvas id="rootCanvas" class="h-full w-full"></canvas>
        <div id="zone-tooltip" class="absolute top-4 right-4 text-xs font-mono text-green-400 opacity-0 transition"></div>
    </div>

    <script>
        const bio4Data = {
            ru: "Корень: Зоны и Функции",
            kz: "Тамыр: Аймақтары мен Қызметі",
            en: "Root: Zones and Functions"
        };
        
        let activeZone = -1;
        let cx, cvs;
        let currentLang = 'ru';

        window.setL = function(l) {
            currentLang = l;
            document.getElementById('title').textContent = bio4Data[l];
        };

        window.hl = function(z) {
            activeZone = z;
            draw();
        };

        function draw() {
            if (!cvs || !cx) return;
            
            const w = cvs.width, h = cvs.height;
            cx.clearRect(0, 0, w, h);
            const cx_ = w / 2;

            // Draw Root Shape
            const gradient = cx.createLinearGradient(0, 0, 0, h);
            gradient.addColorStop(0, '#a16207');
            gradient.addColorStop(1, '#facc15');
            
            // Zones coordinates (approx)
            const zones = [
                {y: h*0.85, h: h*0.15, c: '#fde047', n: "Root Cap & Division"}, // Tip
                {y: h*0.7, h: h*0.15, c: '#facc15', n: "Elongation"},
                {y: h*0.4, h: h*0.3, c: '#eab308', n: "Absorption"},
                {y: 0, h: h*0.4, c: '#ca8a04', n: "Conduction"}
            ];

            zones.forEach((z, i) => {
                cx.fillStyle = i === activeZone ? '#fff' : z.c;
                cx.globalAlpha = i === activeZone ? 0.8 : 0.5;
                cx.fillRect(cx_-40, z.y, 80, z.h);
                cx.globalAlpha = 1.0;
                
                // Root Hairs for Absorption zone
                if (i === 2) {
                    cx.strokeStyle = cx.fillStyle;
                    cx.lineWidth = 1;
                    for(let j=z.y; j<z.y+z.h; j+=10) {
                        cx.beginPath(); cx.moveTo(cx_-40, j); cx.lineTo(cx_-70, j-10); cx.stroke();
                        cx.beginPath(); cx.moveTo(cx_+40, j); cx.lineTo(cx_+70, j-10); cx.stroke();
                    }
                }
            });
            
            // Root Cap outline
            cx.fillStyle = '#854d0e';
            cx.beginPath(); cx.moveTo(cx_-40, h-10); cx.lineTo(cx_, h); cx.lineTo(cx_+40, h-10); cx.fill();

            if (activeZone !== -1) {
                const tt = document.getElementById('zone-tooltip');
                if (tt) {
                    tt.textContent = zones[activeZone].n.toUpperCase();
                    tt.style.opacity = 1;
                }
            } else {
                const tt = document.getElementById('zone-tooltip');
                if(tt) tt.style.opacity = 0;
            }
        }

        window.onload = function() {
            cvs = document.getElementById('rootCanvas');
            if (cvs) {
                cx = cvs.getContext('2d');
                const resize = () => { cvs.width = cvs.parentElement.clientWidth; cvs.height = cvs.parentElement.clientHeight || 600; draw(); };
                window.addEventListener('resize', resize);
                resize();
                window.setL('ru');
            }
        };
    </script>

<script type="text/javascript" src="qrc:///qtwebchannel/qwebchannel.js"></script>


</body>
</html>